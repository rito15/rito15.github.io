<!DOCTYPE html>



<html lang="en" 
  
    mode="dark"
  
>

  <!--
  The Head
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme" content="Chirpy v2.7.2">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="물 쉐이더 만들기" />
<meta name="author" content="Rito15" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="목표 서피스 쉐이더로 물 쉐이더 만들기" />
<meta property="og:description" content="목표 서피스 쉐이더로 물 쉐이더 만들기" />
<link rel="canonical" href="https://rito15.github.io/posts/water-shader/" />
<meta property="og:url" content="https://rito15.github.io/posts/water-shader/" />
<meta property="og:site_name" content="Rito15" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-13T19:24:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="물 쉐이더 만들기" />
<meta name="google-site-verification" content="google_meta_tag_verification" />
<script type="application/ld+json">
{"description":"목표 서피스 쉐이더로 물 쉐이더 만들기","datePublished":"2021-02-13T19:24:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://rito15.github.io/posts/water-shader/"},"url":"https://rito15.github.io/posts/water-shader/","author":{"@type":"Person","name":"Rito15"},"headline":"물 쉐이더 만들기","dateModified":"2021-02-13T19:24:00+09:00","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <title>물 쉐이더 만들기 | Rito15
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://www.favicon-generator.org/
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2019 Cotes Chung
  Published under the MIT license
-->



<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">

<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png">
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png">

<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

<link rel="manifest" href="/assets/img/favicons/manifest.json">
<meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- GA -->
  

  <!-- jsDelivr CDN -->
  <link rel="preconnect" href="cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="cdn.jsdelivr.net">

  <!-- Bootstrap -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous">

  <!-- Font Awesome -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"
    integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ="
    crossorigin="anonymous">

  <!--
  CSS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->






<link rel="preload" href="/assets/css/post.css" as="style">
<link rel="stylesheet" href="/assets/css/post.css">


  
    <link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css">
    <link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" />
  



  <!-- JavaScripts -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>

  <script defer
    src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script>

  <!--
  JS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->





<script async src="/assets/js/post.min.js"></script>


  <!-- MathJax -->
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>





</head>


  <body data-spy="scroll" data-target="#toc">

    <!--
  The Side Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="sidebar" class="d-flex flex-column align-items-end">

  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="/" alt="avatar" class="mx-auto">
        
        <img src="/assets/img/favicons/android-icon-192x192.png" alt="avatar" onerror="this.style.display='none'">
      </a>
    </div>

    <div class="site-title mt-3">
      <a href="/">Rito15</a>
    </div>

    <div class="site-subtitle font-italic">Unity Csharp Developer</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">
    <!-- home -->
    <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>HOME</span>
      </a>
    </li>
    <!-- the real tabs -->
    
    <li class="nav-item">
      <a href="/tabs/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        <span>CATEGORIES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/tags/" class="nav-link">
        <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i>
        <span>TAGS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ARCHIVES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/about/" class="nav-link">
        <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ABOUT</span>
      </a>
    </li> <!-- .nav-item -->
    

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center">

    
      

      
      <a href="https://github.com/rito15" aria-label="github"
        
        target="_blank" rel="noopener">
        <i class="fab fa-github-alt"></i>
      </a>
      

    
      

      
      <a href="
          javascript:location.href = 'mailto:' + ['ghdtkals15','gmail.com'].join('@')" aria-label="email"
        
        >
        <i class="fas fa-envelope"></i>
      </a>
      

    
      

      
      <a href="/feed.xml" aria-label="rss"
        
        >
        <i class="fas fa-rss"></i>
      </a>
      

    

    

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->


    <!--
  The Top Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="topbar-wrapper" class="row justify-content-center topbar-down">
  <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between">
    <span id="breadcrumb">
      
        
        <span>
          <a href="/">
            Posts
          </a>
        </span>
        
      

      
        <span>물 쉐이더 만들기</span>
      

    </span><!-- endof #breadcrumb -->

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      Post
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" placeholder="Search...">
      <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i>
    </span>
    <span id="search-cancel" >Cancel</span>
  </div>

</div>


    <div id="main-wrapper">
      <div id="main">

        <!--
  Refactor the HTML structure.
-->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->


<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->


<!-- Add attribute 'hide-bullet' to the checkbox list -->




  

  

  <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->
  
  

  

  



<!-- return -->
<div class="row">

  <div id="post-wrapper" class="col-12 col-lg-11 col-xl-8">

    <div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

      <h1 data-toc-skip>물 쉐이더 만들기</h1>

      <div class="post-meta text-muted d-flex flex-column">
        <!-- Published date and author -->
        <div>
          <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago "
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Sat, Feb 13, 2021,  7:24 PM +0900"
  >

  
  

  
    Feb 13
  

  <i class="unloaded">2021-02-13T19:24:00+09:00</i>

</span>
          by
          <span class="author">
            Rito15
          </span>
        </div>

        <div>
          <!-- lastmod -->
          

          <!-- read time -->
          <!--
  Calculate the post's reading time, and display the word count in tooltip
 -->






<!-- return element -->
<span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2216 words">12 min</span>


          <!-- page views -->
          

        </div>

      </div> <!-- .post-meta -->

      <div class="post-content">

        

        <h1 id="목표">목표</h1>
<hr />
<ul>
  <li>서피스 쉐이더로 물 쉐이더 만들기</li>
</ul>

<p><br /></p>

<h1 id="목차">목차</h1>
<hr />
<ul>
  <li><a href="#물-쉐이더-기초">1. 물 쉐이더 기초</a></li>
  <li><a href="#프레넬-공식-적용">2. 프레넬 공식 적용</a></li>
  <li><a href="#물-흐르게-하기">3. 물 흐르게 하기</a></li>
  <li><a href="#스페큘러-적용">4. 스페큘러 적용</a></li>
  <li><a href="#파도-만들기">5. 파도 만들기</a></li>
  <li><a href="#투과율-제어하기">6. 투과율 제어하기</a></li>
  <li><a href="#최종-결과">7. 최종 결과</a></li>
</ul>

<p><br /></p>

<h1 id="준비물">준비물</h1>
<hr />
<ul>
  <li>큐브맵 텍스쳐 기반 스카이박스</li>
  <li>물 노멀맵 텍스쳐</li>
  <li>물에 빠질 로봇</li>
</ul>

<p><br /></p>

<h1 id="물-쉐이더-기초">물 쉐이더 기초</h1>
<hr />

<p>메시는 유니티의 기본적인 Plane을 이용한다.</p>

<p>노멀은 노멀맵을 넣어 적용하고, 간단히 float로 타일링이 가능하도록 _Tiling 프로퍼티를 추가한다.</p>

<p>그리고 _Strength 프로퍼티를 통해 노멀의 강도를 조절할 수 있게 한다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107851210-a8e34000-6e4b-11eb-8da1-d918d73f54cf.png" alt="image" class="normal" /></p>

<div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre></td><td class="rouge-code"><pre><span class="n">Shader</span> <span class="s">"Rito/Water"</span>
<span class="p">{</span>
    <span class="n">Properties</span>
    <span class="p">{</span>
        <span class="n">_BumpMap</span><span class="p">(</span><span class="s">"Normal Map"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"bump"</span> <span class="p">{}</span>
        <span class="n">_Cube</span><span class="p">(</span><span class="s">"Cube"</span><span class="p">,</span> <span class="n">Cube</span><span class="p">)</span> <span class="o">=</span> <span class="s">""</span><span class="p">{}</span>

        <span class="p">[</span><span class="n">Space</span><span class="p">]</span>
        <span class="n">_Alpha</span><span class="p">(</span><span class="s">"Alpha"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8</span>
        <span class="n">_Tiling</span><span class="p">(</span><span class="s">"Normal Tiling"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_Strength</span><span class="p">(</span><span class="s">"Normal Strength"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="p">}</span>
    <span class="n">SubShader</span>
    <span class="p">{</span>
        <span class="n">Tags</span> <span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Transparent"</span> <span class="s">"Queue"</span><span class="o">=</span><span class="s">"Transparent"</span> <span class="p">}</span>

        <span class="n">CGPROGRAM</span>
        <span class="cp">#pragma surface surf Lambert alpha:fade
</span>        <span class="cp">#pragma target 3.0
</span>
        <span class="n">sampler2D</span> <span class="n">_BumpMap</span><span class="p">;</span>
        <span class="n">samplerCUBE</span> <span class="n">_Cube</span><span class="p">;</span>

        <span class="k">struct</span> <span class="n">Input</span>
        <span class="p">{</span>
            <span class="kt">float2</span> <span class="n">uv_BumpMap</span><span class="p">;</span>
            <span class="kt">float3</span> <span class="n">worldRefl</span><span class="p">;</span>
            <span class="n">INTERNAL_DATA</span>
        <span class="p">};</span>

        <span class="n">float</span> <span class="n">_Alpha</span><span class="p">;</span>
        <span class="n">float</span> <span class="n">_Tiling</span><span class="p">;</span>
        <span class="n">float</span> <span class="n">_Strength</span><span class="p">;</span>

        <span class="kt">void</span> <span class="n">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">IN</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutput</span> <span class="n">o</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">float3</span> <span class="n">reflColor</span> <span class="o">=</span> <span class="nb">texCUBE</span><span class="p">(</span><span class="n">_Cube</span><span class="p">,</span> <span class="n">WorldReflectionVector</span><span class="p">(</span><span class="n">IN</span><span class="p">,</span> <span class="n">o</span><span class="p">.</span><span class="n">Normal</span><span class="p">));</span>
            <span class="n">o</span><span class="p">.</span><span class="n">Normal</span> <span class="o">=</span> <span class="n">UnpackNormal</span><span class="p">(</span><span class="nb">tex2D</span><span class="p">(</span><span class="n">_BumpMap</span><span class="p">,</span> <span class="n">IN</span><span class="p">.</span><span class="n">uv_BumpMap</span> <span class="o">*</span> <span class="n">_Tiling</span><span class="p">))</span> <span class="o">*</span> <span class="n">_Strength</span><span class="p">;</span>
            <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">reflColor</span><span class="p">;</span>
            <span class="n">o</span><span class="p">.</span><span class="n">Alpha</span> <span class="o">=</span> <span class="n">_Alpha</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">ENDCG</span>
    <span class="p">}</span>
    <span class="n">FallBack</span> <span class="s">"Legacy Shaders/Transparent/VertexLit"</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h1 id="프레넬-공식-적용">프레넬 공식 적용</h1>
<hr />

<p>프레넬 공식은 시야 방향 벡터와 대상의 노멀 방향 벡터의 관계를 이용한 공식이다.</p>

<p>두 벡터가 이루는 각이 수직에 가까울수록 투과율이 감소하고, 반사율이 증가한다는 것을 의미한다.</p>

<p>간단히 <code class="language-plaintext highlighter-rouge">1 - saturate(dot(N, V))</code>로 표현하며, 이를 다양하게 응용할 수 있다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107852230-f8793a00-6e52-11eb-8822-3a245ae2a624.gif" alt="2021_0213_Fresnel1" class="normal" /></p>

<div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>
<span class="c1">// Properties</span>
<span class="n">_FresnelPower</span><span class="p">(</span><span class="s">"Fresnel Power"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">3</span>
<span class="nf">_FresnelIntensity</span><span class="p">(</span><span class="s">"Fresnel Intensity"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">// ...</span>

<span class="kt">void</span> <span class="n">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">IN</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutput</span> <span class="n">o</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float3</span> <span class="n">reflColor</span> <span class="o">=</span> <span class="nb">texCUBE</span><span class="p">(</span><span class="n">_Cube</span><span class="p">,</span> <span class="n">WorldReflectionVector</span><span class="p">(</span><span class="n">IN</span><span class="p">,</span> <span class="n">o</span><span class="p">.</span><span class="n">Normal</span><span class="p">));</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Normal</span> <span class="o">=</span> <span class="n">UnpackNormal</span><span class="p">(</span><span class="nb">tex2D</span><span class="p">(</span><span class="n">_BumpMap</span><span class="p">,</span> <span class="n">IN</span><span class="p">.</span><span class="n">uv_BumpMap</span> <span class="o">*</span> <span class="n">_Tiling</span><span class="p">))</span> <span class="o">*</span> <span class="n">_Strength</span><span class="p">;</span>
    
    <span class="c1">// Fresnel</span>
    <span class="n">float</span> <span class="n">ndv</span> <span class="o">=</span> <span class="nb">saturate</span><span class="p">(</span><span class="nb">dot</span><span class="p">(</span><span class="nb">normalize</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">Normal</span><span class="p">),</span> <span class="n">IN</span><span class="p">.</span><span class="n">viewDir</span><span class="p">));</span>
    <span class="n">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span> <span class="o">-</span> <span class="nb">pow</span><span class="p">(</span><span class="n">ndv</span><span class="p">,</span> <span class="n">_FresnelPower</span><span class="p">)</span> <span class="o">*</span> <span class="n">_FresnelIntensity</span><span class="p">;</span>
    
    <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">reflColor</span> <span class="o">*</span> <span class="n">_CubeIntensity</span> <span class="o">*</span> <span class="n">fresnel</span> <span class="o">+</span> <span class="n">_CubeBrightness</span><span class="p">;</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Alpha</span> <span class="o">=</span> <span class="n">_Alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">fresnel</span> <span class="o">+</span> <span class="n">_AlphaAdd</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h1 id="물-흐르게-하기">물 흐르게 하기</h1>
<hr />

<p>물을 흐르게 하는 것은 정말 간단하다.</p>

<p>노멀 텍스쳐를 샘플링할 때 uv에 시간을 더해주면 된다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107855372-2ebfb500-6e65-11eb-9abe-2e365fa439b7.gif" alt="2021_0214_WaterFlows" class="normal" /></p>

<p>그런데 이렇게 하면 흐른다는 느낌보다 ‘지나간다’는 느낌이 강하다.</p>

<p>그래서 텍스쳐를 두 번 샘플링하여, 서로 반대 방향으로 흐르게 해주고 두 결과의 평균 값을 사용한다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107855374-32ebd280-6e65-11eb-9584-0b798957cce4.gif" alt="2021_0214_WaterFlows2" class="normal" /></p>

<p>이제 정말로 물이 흐르는 듯한 느낌이 든다.</p>

<div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre><span class="c1">// Properties</span>
<span class="n">_FlowDirX</span><span class="p">(</span><span class="s">"Flow Direction X"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nf">_FlowDirY</span><span class="p">(</span><span class="s">"Flow Direction Y"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">_FlowSpeed</span><span class="p">(</span><span class="s">"Flow Speed"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">// ...</span>

<span class="kt">void</span> <span class="n">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">IN</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutput</span> <span class="n">o</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Flow</span>
    <span class="kt">float2</span> <span class="n">flowDir</span> <span class="o">=</span> <span class="nb">normalize</span><span class="p">(</span><span class="kt">float2</span><span class="p">(</span><span class="n">_FlowDirX</span><span class="p">,</span> <span class="n">_FlowDirY</span><span class="p">));</span>
    <span class="kt">float2</span> <span class="n">flow</span> <span class="o">=</span> <span class="n">flowDir</span> <span class="o">*</span> <span class="n">_Time</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">_FlowSpeed</span><span class="p">;</span>
    
    <span class="kt">float3</span> <span class="n">normal1</span> <span class="o">=</span> <span class="n">UnpackNormal</span><span class="p">(</span><span class="nb">tex2D</span><span class="p">(</span><span class="n">_BumpMap</span><span class="p">,</span> <span class="n">IN</span><span class="p">.</span><span class="n">uv_BumpMap</span> <span class="o">*</span> <span class="n">_Tiling</span> <span class="o">+</span> <span class="n">flow</span><span class="p">))</span> <span class="o">*</span> <span class="n">_Strength</span><span class="p">;</span>
    <span class="kt">float3</span> <span class="n">normal2</span> <span class="o">=</span> <span class="n">UnpackNormal</span><span class="p">(</span><span class="nb">tex2D</span><span class="p">(</span><span class="n">_BumpMap</span><span class="p">,</span> <span class="n">IN</span><span class="p">.</span><span class="n">uv_BumpMap</span> <span class="o">*</span> <span class="n">_Tiling</span> <span class="o">-</span> <span class="n">flow</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">))</span> <span class="o">*</span> <span class="n">_Strength</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
    
    <span class="kt">float3</span> <span class="n">reflColor</span> <span class="o">=</span> <span class="nb">texCUBE</span><span class="p">(</span><span class="n">_Cube</span><span class="p">,</span> <span class="n">WorldReflectionVector</span><span class="p">(</span><span class="n">IN</span><span class="p">,</span> <span class="n">o</span><span class="p">.</span><span class="n">Normal</span><span class="p">));</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Normal</span> <span class="o">=</span> <span class="p">(</span><span class="n">normal1</span> <span class="o">+</span> <span class="n">normal2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
    
    <span class="c1">// Fresnel</span>
    <span class="n">float</span> <span class="n">ndv</span> <span class="o">=</span> <span class="nb">saturate</span><span class="p">(</span><span class="nb">dot</span><span class="p">(</span><span class="nb">normalize</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">Normal</span><span class="p">),</span> <span class="n">IN</span><span class="p">.</span><span class="n">viewDir</span><span class="p">));</span>
    <span class="n">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span> <span class="o">-</span> <span class="nb">pow</span><span class="p">(</span><span class="n">ndv</span><span class="p">,</span> <span class="n">_FresnelPower</span><span class="p">)</span> <span class="o">*</span> <span class="n">_FresnelIntensity</span><span class="p">;</span>
    
    <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">reflColor</span> <span class="o">*</span> <span class="n">_CubeIntensity</span> <span class="o">*</span> <span class="n">fresnel</span> <span class="o">+</span> <span class="n">_CubeBrightness</span><span class="p">;</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Alpha</span> <span class="o">=</span> <span class="n">_Alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">fresnel</span> <span class="o">+</span> <span class="n">_AlphaAdd</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h1 id="스페큘러-적용">스페큘러 적용</h1>
<hr />

<p>스페큘러를 이용해 물 표면에 빛이 예쁘게 산란되도록 만들 수 있다.</p>

<p>기존에 사용하던 Lambert 대신, 커스텀 라이트 함수를 만들어 적용한다.</p>

<p>스페큘러는 저렴한 블린 퐁 공식을 사용하였다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107856162-bad3db80-6e69-11eb-9847-473c933d5c6d.gif" alt="2021_0214_WaterSpecular" class="normal" /></p>

<div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="c1">// Properties</span>
<span class="n">_SpColor</span><span class="p">(</span><span class="s">"Specular Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">_SpPower</span><span class="p">(</span><span class="s">"Specular Power"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">500</span><span class="p">))</span> <span class="o">=</span> <span class="mi">150</span>
<span class="nf">_SpIntensity</span><span class="p">(</span><span class="s">"Specular Intensity"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">3</span>

<span class="c1">// ...</span>

<span class="cp">#pragma surface surf WaterSpecular alpha:fade
</span>
<span class="c1">// ...</span>

<span class="kt">float4</span> <span class="n">LightingWaterSpecular</span><span class="p">(</span><span class="n">SurfaceOutput</span> <span class="n">s</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">lightDir</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">viewDir</span><span class="p">,</span> <span class="n">float</span> <span class="n">atten</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float3</span> <span class="n">H</span> <span class="o">=</span> <span class="nb">normalize</span><span class="p">(</span><span class="n">lightDir</span> <span class="o">+</span> <span class="n">viewDir</span><span class="p">);</span> <span class="c1">// Binn Phong</span>
    <span class="n">float</span> <span class="n">spec</span> <span class="o">=</span> <span class="nb">saturate</span><span class="p">(</span><span class="nb">dot</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">Normal</span><span class="p">));</span>
    <span class="n">spec</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">_SpPower</span><span class="p">);</span>
    
    <span class="kt">float4</span> <span class="n">col</span><span class="p">;</span>
    <span class="n">col</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">spec</span> <span class="o">*</span> <span class="n">_SpColor</span><span class="p">.</span><span class="n">rgb</span> <span class="o">*</span> <span class="n">_SpIntensity</span> <span class="o">*</span> <span class="n">_LightColor0</span><span class="p">;</span>
    <span class="n">col</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">Alpha</span> <span class="o">+</span> <span class="n">spec</span><span class="p">;</span>
    
    <span class="k">return</span> <span class="n">col</span><span class="p">;</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h1 id="파도-만들기">파도 만들기</h1>
<hr />

<p>거창한 파도는 아니고, 물이 더 역동적으로 일렁이게끔 하려고 한다.</p>

<p>우선 하나만 사용하던 Plane을 복제하여 4개로 만든다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107856318-a8a66d00-6e6a-11eb-8001-183f3732fe57.png" alt="image" class="normal" /></p>

<p>그리고 버텍스 함수를 추가하고, 정점 Y 위치를 uv.x만큼 더해준다.</p>

<div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="cp">#pragma surface surf WaterSpecular alpha:fade vertex:vert
</span>
<span class="kt">void</span> <span class="nf">vert</span><span class="p">(</span><span class="k">inout</span> <span class="n">appdata_full</span> <span class="n">v</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">v</span><span class="p">.</span><span class="n">texcoord</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107856405-4ef27280-6e6b-11eb-9091-9beeadfee5c8.png" alt="image" class="normal" /></p>

<p>그럼 요렇게 경사가 생긴다.</p>

<p>이번에는 Plane끼리 연결시킬 목적으로 이렇게 수정한다.</p>

<div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">texcoord</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">.</span> <span class="o">-</span> <span class="mi">1</span><span class="p">.);</span>
</pre></td></tr></tbody></table></code></div></div>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107856458-a7c20b00-6e6b-11eb-8870-ba487a6f25dc.png" alt="image" class="normal" /></p>

<p>근데 곰곰이 생각해보니, 메시가 더 조밀한 Plane을 만들어 쓰거나 테셀레이션을 넣으면 굳이 번거롭게 Plane을 여러 장 붙여 쓸 필요가 없을 것 같다.</p>

<p>그래서 바로 만들어 왔다.</p>

<ul>
  <li><a href="../custom-plane-mesh-generator/">Custom Plane Mesh Generator(Link)</a></li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107857915-93364080-6e74-11eb-8578-d5855f9247ae.png" alt="image" class="normal" /></p>

<p>그리고 이번엔 프로퍼티를 넣어 각종 옵션들을 제어할 수 있게 해주고,</p>

<p>uv의 x와 y를 이용해 모든 방향으로 파도를 설정할 수 있게 해준다.</p>

<p>그리고 부드럽게 연결되도록 sin() 함수에 넣어준다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107857293-f920c900-6e70-11eb-90dc-7e7a6e6c9ab3.png" alt="" class="normal" /></p>

<div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre><span class="c1">// Properties</span>
<span class="n">_WaveCount</span><span class="p">(</span><span class="s">"Wave Count"</span><span class="p">,</span> <span class="n">Int</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">_WaveHeight</span><span class="p">(</span><span class="s">"WaveHeight"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">_WaveDirX</span><span class="p">(</span><span class="s">"Wave Direction X"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span>
<span class="n">_WaveDirY</span><span class="p">(</span><span class="s">"Wave Direction Y"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">_WaveSpeed</span><span class="p">(</span><span class="s">"Wave Speed"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">// ...</span>

<span class="cp">#pragma surface surf WaterSpecular alpha:fade vertex:vert
</span>
<span class="c1">// ...</span>

<span class="n">float</span> <span class="n">_WaveHeight</span><span class="p">,</span> <span class="n">_WaveDirX</span><span class="p">,</span> <span class="n">_WaveDirY</span><span class="p">,</span> <span class="n">_WaveSpeed</span><span class="p">;</span>
<span class="n">int</span> <span class="n">_WaveCount</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">vert</span><span class="p">(</span><span class="k">inout</span> <span class="n">appdata_full</span> <span class="n">v</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">float</span> <span class="n">t</span> <span class="o">=</span> <span class="n">_Time</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">_WaveSpeed</span><span class="p">;</span>
    <span class="kt">float2</span> <span class="n">waveDir</span> <span class="o">=</span> <span class="nb">normalize</span><span class="p">(</span><span class="kt">float2</span><span class="p">(</span><span class="n">_WaveDirX</span><span class="p">,</span> <span class="n">_WaveDirY</span><span class="p">));</span>

    <span class="n">float</span> <span class="n">wave</span><span class="p">;</span>
    <span class="n">wave</span>  <span class="o">=</span> <span class="nb">sin</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">texcoord</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">waveDir</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">_WaveCount</span> <span class="o">+</span> <span class="n">t</span><span class="p">)</span> <span class="o">*</span> <span class="n">_WaveHeight</span><span class="p">;</span>
    <span class="n">wave</span> <span class="o">+=</span> <span class="nb">sin</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">texcoord</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">waveDir</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">_WaveCount</span> <span class="o">+</span> <span class="n">t</span><span class="p">)</span> <span class="o">*</span> <span class="n">_WaveHeight</span><span class="p">;</span>

    <span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">wave</span> <span class="o">/</span> <span class="mi">2</span><span class="p">.;</span>
<span class="p">}</span>

<span class="c1">// ...</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107858268-c679cf00-6e76-11eb-939a-8da5f56cf8bd.gif" alt="2021_0214_WaterFinal" class="normal" /></p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107858345-00e36c00-6e77-11eb-91af-1d4f278f31d5.gif" alt="2021_0214_WaterFinal2" class="normal" /></p>

<p><br /></p>

<h1 id="투과율-제어하기">투과율 제어하기</h1>
<hr />

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107852304-632a7580-6e53-11eb-830c-0a3b69710598.png" alt="" class="normal" /></p>

<p>지금까지 노멀맵에 의해 분산된 노멀 값을 기반으로 투과율을 설정했더니, 의도와 전혀 다른 결과가 나왔다.</p>

<p>마치 물 표면에 오클루전이 자글자글하게 낀 것 같은 느낌이었다.</p>

<p>따라서 노멀맵 적용 이전의 노멀값과 뷰 벡터를 이용해 투과율을 제어하도록 변경하였다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107860874-43ac4080-6e85-11eb-8cb6-f5ce42bbdc3a.gif" alt="2021_0214_Penet" class="normal" /></p>

<div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">Header</span><span class="p">(</span><span class="n">Penetration</span> <span class="n">Options</span><span class="p">)]</span>
<span class="n">_Penetration</span><span class="p">(</span><span class="s">"Penetration"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2</span> <span class="c1">// 투과율</span>
<span class="n">_PenetrationThreshold</span><span class="p">(</span><span class="s">"Penetration Threshold"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span> <span class="o">=</span> <span class="mi">5</span>

<span class="cm">/* surf 함수 */</span>
<span class="c1">// originNormal : 노멀맵 적용하지 않은 초기 노멀벡터</span>
<span class="n">float</span> <span class="n">penet</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="nb">saturate</span><span class="p">(</span><span class="nb">dot</span><span class="p">(</span><span class="n">originNormal</span><span class="p">,</span> <span class="n">IN</span><span class="p">.</span><span class="n">viewDir</span><span class="p">)),</span> <span class="n">_PenetrationThreshold</span><span class="p">)</span> <span class="o">*</span> <span class="n">_Penetration</span><span class="p">;</span>
<span class="n">o</span><span class="p">.</span><span class="n">Alpha</span> <span class="o">=</span> <span class="n">_Alpha</span> <span class="o">-</span> <span class="n">penet</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h1 id="최종-결과">최종 결과</h1>
<hr />

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107861076-a4884880-6e86-11eb-9480-9f7d383d96b1.gif" alt="2021_0214_WaterFinal3" /></p>

<div class="language-hlsl highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
</pre></td><td class="rouge-code"><pre><span class="n">Shader</span> <span class="s">"Rito/Water"</span>
<span class="p">{</span>
    <span class="n">Properties</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">Header</span><span class="p">(</span><span class="n">Textures</span><span class="p">)]</span>
        <span class="n">_BumpMap</span><span class="p">(</span><span class="s">"Normal Map"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"bump"</span> <span class="p">{}</span>
        <span class="n">_Cube</span><span class="p">(</span><span class="s">"Cube"</span><span class="p">,</span> <span class="n">Cube</span><span class="p">)</span> <span class="o">=</span> <span class="s">""</span><span class="p">{}</span>

        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">Header</span><span class="p">(</span><span class="n">Basic</span> <span class="n">Options</span><span class="p">)]</span>
        <span class="n">_Tint</span><span class="p">(</span><span class="s">"Tint Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mo">01</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">_Alpha</span><span class="p">(</span><span class="s">"Alpha"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_CubeIntensity</span><span class="p">(</span><span class="s">"CubeMap Intensity"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_CubeBrightness</span><span class="p">(</span><span class="s">"CubeMap Brightness"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">Header</span><span class="p">(</span><span class="n">Penetration</span> <span class="n">Options</span><span class="p">)]</span>
        <span class="n">_Penetration</span><span class="p">(</span><span class="s">"Penetration"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2</span> <span class="c1">// 투과율</span>
        <span class="n">_PenetrationThreshold</span><span class="p">(</span><span class="s">"Penetration Threshold"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span> <span class="o">=</span> <span class="mi">5</span>

        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">Header</span><span class="p">(</span><span class="n">Normal</span> <span class="n">Map</span> <span class="n">Options</span><span class="p">)]</span>
        <span class="n">_Tiling</span><span class="p">(</span><span class="s">"Normal Tiling"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">_Strength</span><span class="p">(</span><span class="s">"Normal Strength"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">Header</span><span class="p">(</span><span class="n">Fresnel</span> <span class="n">Options</span><span class="p">)]</span>
        <span class="n">_FresnelPower</span><span class="p">(</span><span class="s">"Fresnel Power"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">_FresnelIntensity</span><span class="p">(</span><span class="s">"Fresnel Intensity"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">Header</span><span class="p">(</span><span class="n">Lighting</span> <span class="n">Options</span><span class="p">)]</span>
        <span class="n">_SpColor</span><span class="p">(</span><span class="s">"Specular Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">_SpPower</span><span class="p">(</span><span class="s">"Specular Power"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">500</span><span class="p">))</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">_SpIntensity</span><span class="p">(</span><span class="s">"Specular Intensity"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">Header</span><span class="p">(</span><span class="n">Flow</span> <span class="n">Options</span><span class="p">)]</span>
        <span class="n">_FlowDirX</span><span class="p">(</span><span class="s">"Flow Direction X"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">_FlowDirY</span><span class="p">(</span><span class="s">"Flow Direction Y"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_FlowSpeed</span><span class="p">(</span><span class="s">"Flow Speed"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">Header</span><span class="p">(</span><span class="n">Wave</span> <span class="n">Options</span><span class="p">)]</span>
        <span class="n">_WaveCount</span><span class="p">(</span><span class="s">"Wave Count"</span><span class="p">,</span> <span class="n">Int</span><span class="p">)</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="n">_WaveHeight</span><span class="p">(</span><span class="s">"WaveHeight"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span>
        <span class="n">_WaveDirX</span><span class="p">(</span><span class="s">"Wave Direction X"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">_WaveDirY</span><span class="p">(</span><span class="s">"Wave Direction Y"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_WaveSpeed</span><span class="p">(</span><span class="s">"Wave Speed"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="p">}</span>
    <span class="n">SubShader</span>
    <span class="p">{</span>
        <span class="n">Tags</span> <span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Transparent"</span> <span class="s">"Queue"</span><span class="o">=</span><span class="s">"Transparent"</span> <span class="p">}</span>

        <span class="n">CGPROGRAM</span>
        <span class="cp">#pragma surface surf WaterSpecular alpha:fade vertex:vert
</span>        <span class="cp">#pragma target 3.0
</span>
        <span class="n">sampler2D</span> <span class="n">_BumpMap</span><span class="p">;</span>
        <span class="n">samplerCUBE</span> <span class="n">_Cube</span><span class="p">;</span>

        <span class="k">struct</span> <span class="n">Input</span>
        <span class="p">{</span>
            <span class="kt">float2</span> <span class="n">uv_BumpMap</span><span class="p">;</span>
            <span class="kt">float3</span> <span class="n">worldRefl</span><span class="p">;</span>
            <span class="kt">float3</span> <span class="n">viewDir</span><span class="p">;</span>
            <span class="kt">float3</span> <span class="n">Normal</span><span class="p">;</span>
            <span class="n">INTERNAL_DATA</span>
        <span class="p">};</span>

        <span class="n">float</span> <span class="n">_Alpha</span><span class="p">,</span> <span class="n">_Penetration</span><span class="p">,</span> <span class="n">_PenetrationThreshold</span><span class="p">;</span>
        <span class="n">float</span> <span class="n">_CubeIntensity</span><span class="p">,</span> <span class="n">_CubeBrightness</span><span class="p">;</span>
        <span class="n">float</span> <span class="n">_Tiling</span><span class="p">,</span> <span class="n">_Strength</span><span class="p">;</span>
        <span class="n">float</span> <span class="n">_FresnelPower</span><span class="p">,</span> <span class="n">_FresnelIntensity</span><span class="p">;</span>
        <span class="n">float</span> <span class="n">_FlowDirX</span><span class="p">,</span> <span class="n">_FlowDirY</span><span class="p">,</span> <span class="n">_FlowSpeed</span><span class="p">;</span>
        <span class="kt">float4</span> <span class="n">_Tint</span><span class="p">,</span> <span class="n">_SpColor</span><span class="p">;</span>
        <span class="n">float</span> <span class="n">_SpPower</span><span class="p">,</span> <span class="n">_SpIntensity</span><span class="p">,</span> <span class="n">_DiffIntensity</span><span class="p">;</span>
        <span class="n">float</span> <span class="n">_WaveHeight</span><span class="p">,</span> <span class="n">_WaveDirX</span><span class="p">,</span> <span class="n">_WaveDirY</span><span class="p">,</span> <span class="n">_WaveSpeed</span><span class="p">;</span>
        <span class="n">int</span> <span class="n">_WaveCount</span><span class="p">;</span>

        <span class="c1">// Wave</span>
        <span class="kt">void</span> <span class="n">vert</span><span class="p">(</span><span class="k">inout</span> <span class="n">appdata_full</span> <span class="n">v</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">float</span> <span class="n">t</span> <span class="o">=</span> <span class="n">_Time</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">_WaveSpeed</span><span class="p">;</span>
            <span class="kt">float2</span> <span class="n">waveDir</span> <span class="o">=</span> <span class="nb">normalize</span><span class="p">(</span><span class="kt">float2</span><span class="p">(</span><span class="n">_WaveDirX</span><span class="p">,</span> <span class="n">_WaveDirY</span><span class="p">));</span>

            <span class="n">float</span> <span class="n">wave</span><span class="p">;</span>
            <span class="n">wave</span>  <span class="o">=</span> <span class="nb">sin</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">texcoord</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">waveDir</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">_WaveCount</span> <span class="o">+</span> <span class="n">t</span><span class="p">)</span> <span class="o">*</span> <span class="n">_WaveHeight</span><span class="p">;</span>
            <span class="n">wave</span> <span class="o">+=</span> <span class="nb">sin</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">texcoord</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">waveDir</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">_WaveCount</span> <span class="o">+</span> <span class="n">t</span><span class="p">)</span> <span class="o">*</span> <span class="n">_WaveHeight</span><span class="p">;</span>

            <span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">wave</span> <span class="o">/</span> <span class="mi">2</span><span class="p">.;</span>
        <span class="p">}</span>

        <span class="kt">void</span> <span class="n">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">IN</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutput</span> <span class="n">o</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">float3</span> <span class="n">originNormal</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">Normal</span><span class="p">;</span>
            <span class="kt">float3</span> <span class="n">reflColor</span> <span class="o">=</span> <span class="nb">texCUBE</span><span class="p">(</span><span class="n">_Cube</span><span class="p">,</span> <span class="n">WorldReflectionVector</span><span class="p">(</span><span class="n">IN</span><span class="p">,</span> <span class="n">originNormal</span><span class="p">));</span>

            <span class="c1">// Flow</span>
            <span class="kt">float2</span> <span class="n">flowDir</span> <span class="o">=</span> <span class="nb">normalize</span><span class="p">(</span><span class="kt">float2</span><span class="p">(</span><span class="n">_FlowDirX</span><span class="p">,</span> <span class="n">_FlowDirY</span><span class="p">));</span>
            <span class="kt">float2</span> <span class="n">flow</span> <span class="o">=</span> <span class="n">flowDir</span> <span class="o">*</span> <span class="n">_Time</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">_FlowSpeed</span><span class="p">;</span>
            
            <span class="kt">float3</span> <span class="n">normal1</span> <span class="o">=</span> <span class="n">UnpackNormal</span><span class="p">(</span><span class="nb">tex2D</span><span class="p">(</span><span class="n">_BumpMap</span><span class="p">,</span> <span class="n">IN</span><span class="p">.</span><span class="n">uv_BumpMap</span> <span class="o">*</span> <span class="n">_Tiling</span> <span class="o">+</span> <span class="n">flow</span><span class="p">));</span>
            <span class="kt">float3</span> <span class="n">normal2</span> <span class="o">=</span> <span class="n">UnpackNormal</span><span class="p">(</span><span class="nb">tex2D</span><span class="p">(</span><span class="n">_BumpMap</span><span class="p">,</span> <span class="n">IN</span><span class="p">.</span><span class="n">uv_BumpMap</span> <span class="o">*</span> <span class="n">_Tiling</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">-</span> <span class="n">flow</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">))</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
            
            <span class="n">o</span><span class="p">.</span><span class="n">Normal</span> <span class="o">=</span> <span class="p">(</span><span class="n">normal1</span> <span class="o">+</span> <span class="n">normal2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>

            <span class="c1">// Fresnel</span>
            <span class="n">float</span> <span class="n">ndv</span> <span class="o">=</span> <span class="nb">saturate</span><span class="p">(</span><span class="nb">dot</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">Normal</span> <span class="o">*</span> <span class="n">_Strength</span><span class="p">,</span> <span class="n">IN</span><span class="p">.</span><span class="n">viewDir</span><span class="p">));</span>
            <span class="n">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span> <span class="o">-</span> <span class="nb">pow</span><span class="p">(</span><span class="n">ndv</span><span class="p">,</span> <span class="n">_FresnelPower</span><span class="p">)</span> <span class="o">*</span> <span class="n">_FresnelIntensity</span><span class="p">;</span>
            
            <span class="c1">// Penetration</span>
            <span class="n">float</span> <span class="n">penet</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="nb">saturate</span><span class="p">(</span><span class="nb">dot</span><span class="p">(</span><span class="n">originNormal</span><span class="p">,</span> <span class="n">IN</span><span class="p">.</span><span class="n">viewDir</span><span class="p">)),</span> <span class="n">_PenetrationThreshold</span><span class="p">)</span> <span class="o">*</span> <span class="n">_Penetration</span><span class="p">;</span>

            <span class="c1">// FInal</span>
            <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="p">(</span><span class="n">_Tint</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">reflColor</span> <span class="o">*</span> <span class="n">_CubeIntensity</span> <span class="o">*</span> <span class="n">fresnel</span><span class="p">)</span> <span class="o">+</span> <span class="n">_CubeBrightness</span><span class="p">;</span>
            <span class="n">o</span><span class="p">.</span><span class="n">Alpha</span> <span class="o">=</span> <span class="n">_Alpha</span> <span class="o">-</span> <span class="n">penet</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">float4</span> <span class="n">LightingWaterSpecular</span><span class="p">(</span><span class="n">SurfaceOutput</span> <span class="n">s</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">lightDir</span><span class="p">,</span> <span class="kt">float3</span> <span class="n">viewDir</span><span class="p">,</span> <span class="n">float</span> <span class="n">atten</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">float3</span> <span class="n">H</span> <span class="o">=</span> <span class="nb">normalize</span><span class="p">(</span><span class="n">lightDir</span> <span class="o">+</span> <span class="n">viewDir</span><span class="p">);</span> <span class="c1">// Binn Phong</span>
            <span class="n">float</span> <span class="n">spec</span> <span class="o">=</span> <span class="nb">saturate</span><span class="p">(</span><span class="nb">dot</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">Normal</span><span class="p">));</span>
            <span class="n">spec</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">_SpPower</span><span class="p">);</span>

            <span class="kt">float4</span> <span class="n">col</span><span class="p">;</span>
            <span class="n">col</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">spec</span> <span class="o">*</span> <span class="n">_SpColor</span><span class="p">.</span><span class="n">rgb</span> <span class="o">*</span> <span class="n">_SpIntensity</span> <span class="o">*</span> <span class="n">_LightColor0</span><span class="p">;</span>
            <span class="n">col</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">Alpha</span> <span class="o">+</span> <span class="n">spec</span><span class="p">;</span>

            <span class="k">return</span> <span class="n">col</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">ENDCG</span>
    <span class="p">}</span>
    <span class="n">FallBack</span> <span class="s">"Legacy Shaders/Transparent/VertexLit"</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h1 id="references">References</h1>
<hr />
<ul>
  <li>정종필, 테크니컬 아티스트를 위한 유니티 쉐이더 스타트업, 비엘북스, 2017</li>
</ul>


      </div>

      <div class="post-tail-wrapper text-muted">

        <!-- categories -->
        
        <div class="post-meta mb-3">
          <i class="far fa-folder-open fa-fw mr-1"></i>
          
            <a href='/categories/unity-shader/'>Unity Shader</a>,
            <a href='/categories/shader-study/'>Shader Study</a>
        </div>
        

        <!-- tags -->
        
        <div class="post-tags">
          <i class="fa fa-tags fa-fw mr-1"></i>
          
          <a href="/tags/unity/"
            class="post-tag no-text-decoration" >unity</a>
          
          <a href="/tags/csharp/"
            class="post-tag no-text-decoration" >csharp</a>
          
          <a href="/tags/shader/"
            class="post-tag no-text-decoration" >shader</a>
          
          <a href="/tags/graphics/"
            class="post-tag no-text-decoration" >graphics</a>
          
          <a href="/tags/water/"
            class="post-tag no-text-decoration" >water</a>
          
          </div>
        

        <div class="post-tail-bottom
          d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
          
          <div class="license-wrapper">
            This post is licensed under
            <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
            by the author.
          </div>
          

          <!--
 Post sharing snippet

 v2.1
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Share</span>
  <span class="share-icons">
    
    

    
      
        <a href="https://twitter.com/intent/tweet?text=물 쉐이더 만들기 - Rito15&url=https://rito15.github.io/posts/water-shader/" data-toggle="tooltip" data-placement="top"
          title="Twitter" target="_blank" rel="noopener" aria-label="Twitter">
          <i class="fa-fw fab fa-twitter"></i>
        </a>
    
      
        <a href="https://www.facebook.com/sharer/sharer.php?title=물 쉐이더 만들기 - Rito15&u=https://rito15.github.io/posts/water-shader/" data-toggle="tooltip" data-placement="top"
          title="Facebook" target="_blank" rel="noopener" aria-label="Facebook">
          <i class="fa-fw fab fa-facebook-square"></i>
        </a>
    
      
        <a href="https://telegram.me/share?text=물 쉐이더 만들기 - Rito15&url=https://rito15.github.io/posts/water-shader/" data-toggle="tooltip" data-placement="top"
          title="Telegram" target="_blank" rel="noopener" aria-label="Telegram">
          <i class="fa-fw fab fa-telegram"></i>
        </a>
    

    <i class="fa-fw fas fa-link small" onclick="copyLink()"
        data-toggle="tooltip" data-placement="top" title="Copy link"></i>

  </span>
</div>


        </div><!-- .post-tail-bottom -->

      </div><!-- div.post-tail -->

    </div> <!-- .post -->


  </div> <!-- #post-wrapper -->

  

  

  <!--
  The Pannel on right side (Desktop views)
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">

  <div class="access">

  














  

    <div id="access-lastmod" class="post">
      <span>Recent Update</span>
      <ul class="post-content pl-0 pb-1 ml-1 mt-2">

      
        
        
        
        <li><a href="/posts/unity-particle-system-example-09-rainfall/">파티클 시스템 예제 - 09 - Rainfall</a></li>
      
        
        
        
        <li><a href="/posts/unity-particle-system-example-10-magic-circle/">파티클 시스템 예제 - 10 - Magic Circle</a></li>
      
        
        
        
        <li><a href="/posts/ray-marching/">레이 마칭(Ray Marching)</a></li>
      
        
        
        
        <li><a href="/posts/unity-opt-script-optimization/">유니티 스크립트 최적화</a></li>
      
        
        
        
        <li><a href="/posts/unity-memo-ui-drag-and-drop/">UI 헤더 드래그 앤 드롭으로 옮기기</a></li>
      

      </ul>
    </div> <!-- #access-lastmod -->

  

  















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  
    <div id="access-tags">
      <span>Trending Tags</span>
      <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

      
        
        <a class="post-tag" href="/tags/csharp/">csharp</a>
      
        
        <a class="post-tag" href="/tags/unity/">unity</a>
      
        
        <a class="post-tag" href="/tags/graphics/">graphics</a>
      
        
        <a class="post-tag" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag" href="/tags/shader/">shader</a>
      
        
        <a class="post-tag" href="/tags/plugin/">plugin</a>
      
        
        <a class="post-tag" href="/tags/particle/">particle</a>
      
        
        <a class="post-tag" href="/tags/editor/">editor</a>
      
        
        <a class="post-tag" href="/tags/shadergraph/">shadergraph</a>
      
        
        <a class="post-tag" href="/tags/urp/">urp</a>
      

      </div>
    </div>
  
  </div> <!-- .access -->

  

</div> <!-- #panel-wrapper -->


</div> <!-- .row -->

<div class="row">
  <div class="col-12 col-lg-11 col-xl-8">
    <div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

    <!--
 Recommend the other 3 posts according to the tags and categories of the current post,
 if the number is not enough, use the other latest posts to supplement.

 v2.0
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<!-- The total size of related posts  -->


<!-- An random integer that bigger than 0  -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy}  -->








  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  
    
  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  








<!-- Fill with the other newlest posts  -->






  <div id="related-posts" class="mt-5 mb-2 mb-sm-4">
    <h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3>
    <div class="card-deck mb-4">
    
      
      
      <div class="card">
        <a href="/posts/unity-shader-compilation/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Feb  6
  

  <i class="unloaded">2021-02-06T01:25:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>유니티 쉐이더 모음</h3>
            <div class="text-muted small">
              <p>
                





                Render Depth



  단순히 뎁스만 색상으로 보여주는 쉐이더





  
    Shader "Render Depth"
{
    Properties
    {
        _Multiplier("Multiplier", Float) = 50
    }

    SubShader
    {
        Tags { "RenderType"...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/unity-transparent-stencil/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Feb  6
  

  <i class="unloaded">2021-02-06T01:29:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>유니티 반투명, 스텐실 개념 익히기</h3>
            <div class="text-muted small">
              <p>
                





                목차



  1. 불투명과 반투명
  2. 알파 블렌딩, 알파 소팅
  3. 알파 테스트
  4. 커스텀 알파 블렌딩
  5. 파티클 쉐이더 만들어보기
  6. 깨끗한 알파 블렌딩 쉐이더 만들기
  7. ZTest와 ZWrite
  8. 알파 블렌딩 쉐이더에서 발생하는 문제점들
  9. 스텐실
  10. References




불투명과 반투명

...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/lighting-models/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Nov 16, 2020
  

  <i class="unloaded">2020-11-16T17:14:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Lighting Models</h3>
            <div class="text-muted small">
              <p>
                





                Vectors




  L (Light) : 정점에서 광원을 향하는 방향의 벡터
  N (Normal) : 정점의 노멀 벡터
  V (View) : 정점에서 카메라를 향하는 방향의 벡터
  R (Reflect) : 노멀벡터를 법선으로 하여 계산한 L의 반사 벡터 ( 2N(NdL)-L )
  
    H (Half) : 블린퐁에서 사용, L와 V의 중...
              </p>
            </div>
          </div>
        </a>
      </div>
    
    </div> <!-- .card-deck -->
  </div> <!-- #related-posts -->



    <!--
  Navigation buttons at the bottom of the post.

  v2.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->

<div class="post-navigation d-flex justify-content-between">
  
  <a href="/posts/opengl-study-17/" class="btn btn-outline-primary">
    <p>OpenGL 공부 - 17 - Ambient, Diffuse Lighting</p>
  </a>
  

  
  <a href="/posts/unity-toy-custom-plane-mesh-generator/" class="btn btn-outline-primary">
    <p>Custom Plane Mesh Generator</p>
  </a>
  

</div>

    

    </div> <!-- #post-extend-wrapper -->

  </div> <!-- .col-* -->

</div> <!-- .row -->



  <!-- image lazy load: https://github.com/ApoorvSaxena/lozad.js -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>

<script type="text/javascript">
  const imgs = document.querySelectorAll('.post-content img');
  const observer = lozad(imgs);
  observer.observe();
</script>




        <!--
  The Footer
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<footer class="d-flex w-100 justify-content-center">
  <div class="d-flex justify-content-between align-items-center">
    <div class="footer-left">
      <p class="mb-0">
        © 2021
        <a href="https://github.com/rito15">Rito15</a>.
        
        <span data-toggle="tooltip" data-placement="top"
          title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span>
        
      </p>
    </div>

    <div class="footer-right">
      <p class="mb-0">
        Powered by
        <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
        with
        <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a>
        theme.
      </p>
    </div>

  </div> <!-- div.d-flex -->
</footer>


      </div>

      <!--
  The Search results
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-12 col-xl-11 post-content">
    <div id="search-hints">
      <h4 class="text-muted mb-4">Trending Tags</h4>

      















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



      
        
        <a class="post-tag" href="/tags/csharp/">csharp</a>
      
        
        <a class="post-tag" href="/tags/unity/">unity</a>
      
        
        <a class="post-tag" href="/tags/graphics/">graphics</a>
      
        
        <a class="post-tag" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag" href="/tags/shader/">shader</a>
      
        
        <a class="post-tag" href="/tags/plugin/">plugin</a>
      
        
        <a class="post-tag" href="/tags/particle/">particle</a>
      
        
        <a class="post-tag" href="/tags/editor/">editor</a>
      
        
        <a class="post-tag" href="/tags/shadergraph/">shadergraph</a>
      
        
        <a class="post-tag" href="/tags/urp/">urp</a>
      

    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>


    </div> <!-- #main-wrapper -->

    
      <!--
  mermaid-js loader
-->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(function() {
    let initTheme = "default";

    if ($("html[mode=dark]").length > 0
      || ($("html[mode]").length == 0
        && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) {
      initTheme = "dark";
    }

    let mermaidConf = {
      theme: initTheme  /* <default|dark|forest|neutral> */
    };

    /* Markdown converts to HTML */
    $("pre").has("code.language-mermaid").each(function() {
      let svgCode = $(this).children().html();
      $(this).addClass("unloaded");
      $(this).after(`<div class=\"mermaid\">${svgCode}</div>`);
    });

    mermaid.initialize(mermaidConf);
  });
</script>

    

    <div id="mask"></div>

    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>

    <!--
  Jekyll Simple Search loader
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->





<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script>

<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="https://rito15.github.io{url}">{title}</a>  <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    <div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div>    <div><i class="fa fa-tag fa-fw"></i>{tags}</div>  </div>  <p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">Oops! No result founds.</p>'
});
</script>


  </body>

</html>

