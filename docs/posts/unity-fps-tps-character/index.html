<!DOCTYPE html>



<html lang="en" 
  
    mode="dark"
  
>

  <!--
  The Head
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme" content="Chirpy v2.7.2">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="유니티 - 1인칭, 3인칭 전환 가능한 캐릭터 제작하기" />
<meta name="author" content="Rito15" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="목차 1. 하이라키 구성 2. 스크립트 기초 3. 1인칭 이동, 회전 4. 3인칭 이동, 회전 5. 카메라 전환 6. 점프 7. 애니메이션 적용 8. 애니메이션 블렌딩 9. 카메라 전환 시 시점 방향 유지하기 10. 3인칭 카메라 줌 구현 11. 점프 버그 수정 12. 이동 스크립트 분리하기 13. 소스 코드" />
<meta property="og:description" content="목차 1. 하이라키 구성 2. 스크립트 기초 3. 1인칭 이동, 회전 4. 3인칭 이동, 회전 5. 카메라 전환 6. 점프 7. 애니메이션 적용 8. 애니메이션 블렌딩 9. 카메라 전환 시 시점 방향 유지하기 10. 3인칭 카메라 줌 구현 11. 점프 버그 수정 12. 이동 스크립트 분리하기 13. 소스 코드" />
<link rel="canonical" href="https://rito15.github.io/posts/unity-fps-tps-character/" />
<meta property="og:url" content="https://rito15.github.io/posts/unity-fps-tps-character/" />
<meta property="og:site_name" content="Rito15" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-12T18:06:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="유니티 - 1인칭, 3인칭 전환 가능한 캐릭터 제작하기" />
<meta name="google-site-verification" content="google_meta_tag_verification" />
<script type="application/ld+json">
{"description":"목차 1. 하이라키 구성 2. 스크립트 기초 3. 1인칭 이동, 회전 4. 3인칭 이동, 회전 5. 카메라 전환 6. 점프 7. 애니메이션 적용 8. 애니메이션 블렌딩 9. 카메라 전환 시 시점 방향 유지하기 10. 3인칭 카메라 줌 구현 11. 점프 버그 수정 12. 이동 스크립트 분리하기 13. 소스 코드","datePublished":"2021-02-12T18:06:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://rito15.github.io/posts/unity-fps-tps-character/"},"url":"https://rito15.github.io/posts/unity-fps-tps-character/","author":{"@type":"Person","name":"Rito15"},"headline":"유니티 - 1인칭, 3인칭 전환 가능한 캐릭터 제작하기","dateModified":"2021-09-17T04:13:36+09:00","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <title>유니티 - 1인칭, 3인칭 전환 가능한 캐릭터 제작하기 | Rito15
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://www.favicon-generator.org/
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2019 Cotes Chung
  Published under the MIT license
-->



<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">

<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png">
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png">

<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

<link rel="manifest" href="/assets/img/favicons/manifest.json">
<meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- GA -->
  

  <!-- jsDelivr CDN -->
  <link rel="preconnect" href="cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="cdn.jsdelivr.net">

  <!-- Bootstrap -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous">

  <!-- Font Awesome -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"
    integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ="
    crossorigin="anonymous">

  <!--
  CSS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->






<link rel="preload" href="/assets/css/post.css" as="style">
<link rel="stylesheet" href="/assets/css/post.css">


  
    <link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css">
    <link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" />
  



  <!-- JavaScripts -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>

  <script defer
    src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script>

  <!--
  JS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->





<script async src="/assets/js/post.min.js"></script>


  <!-- MathJax -->
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>





</head>


  <body data-spy="scroll" data-target="#toc">

    <!--
  The Side Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="sidebar" class="d-flex flex-column align-items-end">

  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="/" alt="avatar" class="mx-auto">
        
        <img src="/assets/img/favicons/android-icon-192x192.png" alt="avatar" onerror="this.style.display='none'">
      </a>
    </div>

    <div class="site-title mt-3">
      <a href="/">Rito15</a>
    </div>

    <div class="site-subtitle font-italic">Unity Csharp Developer</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">
    <!-- home -->
    <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>HOME</span>
      </a>
    </li>
    <!-- the real tabs -->
    
    <li class="nav-item">
      <a href="/tabs/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        <span>CATEGORIES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/tags/" class="nav-link">
        <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i>
        <span>TAGS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ARCHIVES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/about/" class="nav-link">
        <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ABOUT</span>
      </a>
    </li> <!-- .nav-item -->
    

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center">

    
      

      
      <a href="https://github.com/rito15" aria-label="github"
        
        target="_blank" rel="noopener">
        <i class="fab fa-github-alt"></i>
      </a>
      

    
      

      
      <a href="
          javascript:location.href = 'mailto:' + ['ghdtkals15','gmail.com'].join('@')" aria-label="email"
        
        >
        <i class="fas fa-envelope"></i>
      </a>
      

    
      

      
      <a href="/feed.xml" aria-label="rss"
        
        >
        <i class="fas fa-rss"></i>
      </a>
      

    

    

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->


    <!--
  The Top Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="topbar-wrapper" class="row justify-content-center topbar-down">
  <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between">
    <span id="breadcrumb">
      
        
        <span>
          <a href="/">
            Posts
          </a>
        </span>
        
      

      
        <span>유니티 - 1인칭, 3인칭 전환 가능한 캐릭터 제작하기</span>
      

    </span><!-- endof #breadcrumb -->

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      Post
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" placeholder="Search...">
      <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i>
    </span>
    <span id="search-cancel" >Cancel</span>
  </div>

</div>


    <div id="main-wrapper">
      <div id="main">

        <!--
  Refactor the HTML structure.
-->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->


<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->


<!-- Add attribute 'hide-bullet' to the checkbox list -->




  

  

  <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->
  
  

  

  



<!-- return -->
<div class="row">

  <div id="post-wrapper" class="col-12 col-lg-11 col-xl-8">

    <div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

      <h1 data-toc-skip>유니티 - 1인칭, 3인칭 전환 가능한 캐릭터 제작하기</h1>

      <div class="post-meta text-muted d-flex flex-column">
        <!-- Published date and author -->
        <div>
          <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago "
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Fri, Feb 12, 2021,  6:06 PM +0900"
  >

  
  

  
    Feb 12
  

  <i class="unloaded">2021-02-12T18:06:00+09:00</i>

</span>
          by
          <span class="author">
            Rito15
          </span>
        </div>

        <div>
          <!-- lastmod -->
          
          <span>
            Updated
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago lastmod"
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Fri, Sep 17, 2021,  4:13 AM +0900"
  >

  
  

  
    Sep 17
  

  <i class="unloaded">2021-09-17T04:13:36+09:00</i>

</span>
          </span>
          

          <!-- read time -->
          <!--
  Calculate the post's reading time, and display the word count in tooltip
 -->






<!-- return element -->
<span class="readtime" data-toggle="tooltip" data-placement="bottom" title="8578 words">47 min</span>


          <!-- page views -->
          

          <!-- HITS -->
          &nbsp;
          <a href="https://hits.seeyoufarm.com"><img min-width="94" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://rito15.github.io/posts/unity-fps-tps-character/%2F&count_bg=%23AC58FA&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=views&edge_flat=false"/></a> 

        </div>

      </div> <!-- .post-meta -->

      <div class="post-content">

        

        <h1 id="목차">목차</h1>
<hr />
<ul>
  <li><a href="#하이라키-구성하기">1. 하이라키 구성</a></li>
  <li><a href="#스크립트-기초-작성">2. 스크립트 기초</a></li>
  <li><a href="#1인칭-이동-회전-구현">3. 1인칭 이동, 회전</a></li>
  <li><a href="#3인칭-이동-회전-구현">4. 3인칭 이동, 회전</a></li>
  <li><a href="#카메라-전환-기능-구현">5. 카메라 전환</a></li>
  <li><a href="#점프-구현">6. 점프</a></li>
  <li><a href="#애니메이션-적용하기">7. 애니메이션 적용</a></li>
  <li><a href="#애니메이션-블렌딩">8. 애니메이션 블렌딩</a></li>
  <li><a href="#카메라-전환-시-시점-방향-유지하기">9. 카메라 전환 시 시점 방향 유지하기</a></li>
  <li><a href="#3인칭-카메라-줌-구현하기">10. 3인칭 카메라 줌 구현</a></li>
  <li><a href="#점프-버그-수정하기">11. 점프 버그 수정</a></li>
  <li><a href="#이동-스크립트-분리하기">12. 이동 스크립트 분리하기</a></li>
  <li><a href="#source-code">13. 소스 코드</a></li>
</ul>

<p><br /></p>

<h1 id="하이라키-구성하기">하이라키 구성하기</h1>
<hr />

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107759975-66970180-6d6c-11eb-87f7-d712112f6a90.png" alt="image" class="normal" /></p>

<p>위와 같이 캐릭터의 하이라키를 구성한다.</p>

<p>따로 지정하지 않는 이상,</p>

<p>모든 게임오브젝트는 Position(0, 0, 0), Rotation(0, 0, 0), Scale(1, 1, 1)로 초깃값을 지정한다.</p>

<p>이동에 사용할 캐릭터의 예시로 유니티짱(UnityChan) 모델을 사용하였다.</p>

<h2 id="character-root">Character Root</h2>
<ul>
  <li>실제로 이동할 게임오브젝트</li>
  <li>1인칭, 3인칭 이동 담당</li>
  <li>Capsule Collider 컴포넌트 : 캐릭터의 규격에 맞추어 콜라이더 영역을 조절한다.</li>
  <li>Rigidbody 컴포넌트 : 캐릭터의 이동을 물리 기반으로 구현할 것이므로 리지드바디를 사용한다. 트랜스폼을 직접 이용하거나 캐릭터 컨트롤러, 혹은 외부 클래스를 사용할 경우 필요하지 않다.</li>
</ul>

<h2 id="tp-camera-rig">TP Camera Rig</h2>
<ul>
  <li>빈 게임오브젝트</li>
  <li>3인칭 상하, 좌우 회전 담당</li>
  <li>Position(0, 1, 0), Rotation(45, 0, 0) 설정</li>
</ul>

<h2 id="tp-camera">TP Camera</h2>
<ul>
  <li>3인칭 카메라</li>
  <li>Camera 컴포넌트 존재</li>
  <li>Position(0, 0, -4) 설정</li>
</ul>

<h2 id="fp-root">FP Root</h2>
<ul>
  <li>빈 게임오브젝트</li>
  <li>1인칭 좌우 회전 담당</li>
</ul>

<h2 id="fp-camera-rig">FP Camera Rig</h2>
<ul>
  <li>빈 게임오브젝트</li>
  <li>1인칭 상하 회전 담당</li>
  <li>Position의 Y값은 눈높이에 오도록 높이고, Z 값은 0.1~0.2 정도로 설정</li>
</ul>

<h2 id="fp-camera">FP Camera</h2>
<ul>
  <li>1인칭 카메라</li>
  <li>Camera 컴포넌트 존재</li>
</ul>

<h2 id="unitychan">unitychan</h2>
<ul>
  <li>캐릭터 모델을 위치시킨다.</li>
  <li>Animator 컴포넌트 존재 (Apply Root Motion 체크 해제)</li>
</ul>

<p><br /></p>

<h1 id="스크립트-기초-작성">스크립트 기초 작성</h1>
<hr />

<details>
  <summary> 
Source Code
</summary>

  <div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
</pre></td><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">CharacterMainController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="cm">/***********************************************************************
    *                               Definitions
    ***********************************************************************/</span>
    <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
    <span class="k">public</span> <span class="k">enum</span> <span class="n">CameraType</span> <span class="p">{</span> <span class="n">FpCamera</span><span class="p">,</span> <span class="n">TpCamera</span> <span class="p">};</span>

    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Components</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Camera</span> <span class="n">tpCamera</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">Camera</span> <span class="n">fpCamera</span><span class="p">;</span>

        <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Transform</span> <span class="n">tpRig</span><span class="p">;</span>
        <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Transform</span> <span class="n">fpRoot</span><span class="p">;</span>
        <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Transform</span> <span class="n">fpRig</span><span class="p">;</span>

        <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">GameObject</span> <span class="n">tpCamObject</span><span class="p">;</span>
        <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">GameObject</span> <span class="n">fpCamObject</span><span class="p">;</span>

        <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Rigidbody</span> <span class="n">rBody</span><span class="p">;</span>
        <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Animator</span> <span class="n">anim</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">KeyOption</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">moveForward</span>  <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">W</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">moveBackward</span> <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">S</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">moveLeft</span>     <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">A</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">moveRight</span>    <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">D</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">run</span>  <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">LeftShift</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">jump</span> <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">Space</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">switchCamera</span> <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">Tab</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">showCursor</span> <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">LeftAlt</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">MovementOption</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">1f</span><span class="p">,</span> <span class="m">10f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"이동속도"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">speed</span> <span class="p">=</span> <span class="m">3f</span><span class="p">;</span>
        <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">1f</span><span class="p">,</span> <span class="m">3f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"달리기 이동속도 증가 계수"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">runningCoef</span> <span class="p">=</span> <span class="m">1.5f</span><span class="p">;</span>
        <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">1f</span><span class="p">,</span> <span class="m">10f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"점프 강도"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">jumpForce</span> <span class="p">=</span> <span class="m">5.5f</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">CameraOption</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="nf">Tooltip</span><span class="p">(</span><span class="s">"게임 시작 시 카메라"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="n">CameraType</span> <span class="n">initialCamera</span><span class="p">;</span>
        <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">1f</span><span class="p">,</span> <span class="m">10f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"카메라 상하좌우 회전 속도"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">rotationSpeed</span> <span class="p">=</span> <span class="m">2f</span><span class="p">;</span>
        <span class="p">[</span><span class="nf">Range</span><span class="p">(-</span><span class="m">90f</span><span class="p">,</span> <span class="m">0f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"올려다보기 제한 각도"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">lookUpDegree</span> <span class="p">=</span> <span class="p">-</span><span class="m">60f</span><span class="p">;</span>
        <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span> <span class="m">75f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"내려다보기 제한 각도"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">lookDownDegree</span> <span class="p">=</span> <span class="m">75f</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">AnimatorOption</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">paramMoveX</span> <span class="p">=</span> <span class="s">"Move X"</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">paramMoveY</span> <span class="p">=</span> <span class="s">"Move Y"</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">paramMoveZ</span> <span class="p">=</span> <span class="s">"Move Z"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">CharacterState</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">isCurrentFp</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">isMoving</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">isRunning</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">isGrounded</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="err">#</span><span class="n">endregion</span>
    <span class="cm">/***********************************************************************
    *                               Fields, Properties
    ***********************************************************************/</span>
    <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
    <span class="k">public</span> <span class="n">Components</span> <span class="n">Com</span> <span class="p">=&gt;</span> <span class="n">_components</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">KeyOption</span> <span class="n">Key</span> <span class="p">=&gt;</span> <span class="n">_keyOption</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">MovementOption</span> <span class="n">MoveOption</span> <span class="p">=&gt;</span> <span class="n">_movementOption</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">CameraOption</span>   <span class="n">CamOption</span>  <span class="p">=&gt;</span> <span class="n">_cameraOption</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">AnimatorOption</span> <span class="n">AnimOption</span> <span class="p">=&gt;</span> <span class="n">_animatorOption</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">CharacterState</span> <span class="n">State</span> <span class="p">=&gt;</span> <span class="n">_state</span><span class="p">;</span>

    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">Components</span> <span class="n">_components</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Components</span><span class="p">();</span>
    <span class="p">[</span><span class="n">Space</span><span class="p">]</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">KeyOption</span> <span class="n">_keyOption</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">KeyOption</span><span class="p">();</span>
    <span class="p">[</span><span class="n">Space</span><span class="p">]</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">MovementOption</span> <span class="n">_movementOption</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MovementOption</span><span class="p">();</span>
    <span class="p">[</span><span class="n">Space</span><span class="p">]</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">CameraOption</span>   <span class="n">_cameraOption</span>   <span class="p">=</span> <span class="k">new</span> <span class="nf">CameraOption</span><span class="p">();</span>
    <span class="p">[</span><span class="n">Space</span><span class="p">]</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">AnimatorOption</span> <span class="n">_animatorOption</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">AnimatorOption</span><span class="p">();</span>
    <span class="p">[</span><span class="n">Space</span><span class="p">]</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">CharacterState</span> <span class="n">_state</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CharacterState</span><span class="p">();</span>

    <span class="k">private</span> <span class="n">Vector3</span> <span class="n">_moveDir</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Vector3</span> <span class="n">_worldMove</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Vector2</span> <span class="n">_rotation</span><span class="p">;</span>

    <span class="err">#</span><span class="n">endregion</span>

    <span class="cm">/***********************************************************************
    *                               Unity Events
    ***********************************************************************/</span>
    <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
    <span class="k">private</span> <span class="k">void</span> <span class="nf">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nf">InitComponents</span><span class="p">();</span>
        <span class="nf">InitSettings</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="err">#</span><span class="n">endregion</span>
    <span class="cm">/***********************************************************************
    *                               Init Methods
    ***********************************************************************/</span>
    <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
    <span class="k">private</span> <span class="k">void</span> <span class="nf">InitComponents</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nf">LogNotInitializedComponentError</span><span class="p">(</span><span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">,</span> <span class="s">"TP Camera"</span><span class="p">);</span>
        <span class="nf">LogNotInitializedComponentError</span><span class="p">(</span><span class="n">Com</span><span class="p">.</span><span class="n">fpCamera</span><span class="p">,</span> <span class="s">"FP Camera"</span><span class="p">);</span>
        <span class="nf">TryGetComponent</span><span class="p">(</span><span class="k">out</span> <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">);</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">anim</span> <span class="p">=</span> <span class="n">GetComponentInChildren</span><span class="p">&lt;</span><span class="n">Animator</span><span class="p">&gt;();</span>

        <span class="n">Com</span><span class="p">.</span><span class="n">tpCamObject</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">.</span><span class="n">gameObject</span><span class="p">;</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">parent</span><span class="p">;</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">fpCamObject</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpCamera</span><span class="p">.</span><span class="n">gameObject</span><span class="p">;</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpCamera</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">parent</span><span class="p">;</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">parent</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">InitSettings</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Rigidbody</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// 회전은 트랜스폼을 통해 직접 제어할 것이기 때문에 리지드바디 회전은 제한</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">constraints</span> <span class="p">=</span> <span class="n">RigidbodyConstraints</span><span class="p">.</span><span class="n">FreezeRotation</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// Camera</span>
        <span class="kt">var</span> <span class="n">allCams</span> <span class="p">=</span> <span class="n">FindObjectsOfType</span><span class="p">&lt;</span><span class="n">Camera</span><span class="p">&gt;();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">cam</span> <span class="k">in</span> <span class="n">allCams</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">cam</span><span class="p">.</span><span class="n">gameObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">// 설정한 카메라 하나만 활성화</span>
        <span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span> <span class="p">=</span> <span class="p">(</span><span class="n">CamOption</span><span class="p">.</span><span class="n">initialCamera</span> <span class="p">==</span> <span class="n">CameraType</span><span class="p">.</span><span class="n">FpCamera</span><span class="p">);</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">fpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">tpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(!</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="err">#</span><span class="n">endregion</span>
    <span class="cm">/***********************************************************************
    *                               Checker Methods
    ***********************************************************************/</span>
    <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
    <span class="k">private</span> <span class="k">void</span> <span class="n">LogNotInitializedComponentError</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">T</span> <span class="n">component</span><span class="p">,</span> <span class="kt">string</span> <span class="n">componentName</span><span class="p">)</span> <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="n">Component</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">component</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">componentName</span><span class="p">}</span><span class="s"> 컴포넌트를 인스펙터에 넣어주세요"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="err">#</span><span class="n">endregion</span>
    <span class="cm">/***********************************************************************
    *                               Methods
    ***********************************************************************/</span>
    <span class="err">#</span><span class="n">region</span> <span class="p">.</span>

    <span class="err">#</span><span class="n">endregion</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div>  </div>

</details>

<p>위처럼 1인칭/3인칭 캐릭터 구현에 필요한 기초를 작성한다.</p>

<p>그리고 인스펙터에서 TP Camera, FP Camera를 드래그하여 초기화한다.</p>

<p><br /></p>

<h1 id="1인칭-이동-회전-구현">1인칭 이동, 회전 구현</h1>
<hr />

<details>
  <summary> 
Source Code
</summary>

  <div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
</pre></td><td class="rouge-code"><pre><span class="c1">/// &lt;summary&gt; 키보드 입력을 통해 필드 초기화 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">SetValuesByKeyInput</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="m">0f</span><span class="p">,</span> <span class="n">v</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">moveForward</span><span class="p">))</span> <span class="n">v</span> <span class="p">+=</span> <span class="m">1.0f</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">moveBackward</span><span class="p">))</span> <span class="n">v</span> <span class="p">-=</span> <span class="m">1.0f</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">moveLeft</span><span class="p">))</span> <span class="n">h</span> <span class="p">-=</span> <span class="m">1.0f</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">moveRight</span><span class="p">))</span> <span class="n">h</span> <span class="p">+=</span> <span class="m">1.0f</span><span class="p">;</span>

    <span class="n">Vector3</span> <span class="n">moveInput</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="m">0f</span><span class="p">,</span> <span class="n">v</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
    <span class="n">_moveDir</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">_moveDir</span><span class="p">,</span> <span class="n">moveInput</span><span class="p">,</span> <span class="n">MoveOption</span><span class="p">.</span><span class="n">acceleration</span><span class="p">);</span> <span class="c1">// 가속, 감속</span>
    <span class="n">_rotation</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetAxisRaw</span><span class="p">(</span><span class="s">"Mouse X"</span><span class="p">),</span> <span class="p">-</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetAxisRaw</span><span class="p">(</span><span class="s">"Mouse Y"</span><span class="p">));</span>

    <span class="n">State</span><span class="p">.</span><span class="n">isMoving</span> <span class="p">=</span> <span class="n">_moveDir</span><span class="p">.</span><span class="n">sqrMagnitude</span> <span class="p">&gt;</span> <span class="m">0.01f</span><span class="p">;</span>
    <span class="n">State</span><span class="p">.</span><span class="n">isRunning</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">run</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">/// &lt;summary&gt; 1인칭 회전 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">Rotate</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">deltaCoef</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">50f</span><span class="p">;</span>

    <span class="c1">// 상하 : FP Rig 회전</span>
    <span class="kt">float</span> <span class="n">xRotPrev</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">xRotNext</span> <span class="p">=</span> <span class="n">xRotPrev</span> <span class="p">+</span> <span class="n">_rotation</span><span class="p">.</span><span class="n">y</span>
        <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">rotationSpeed</span> <span class="p">*</span> <span class="n">deltaCoef</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">xRotNext</span> <span class="p">&gt;</span> <span class="m">180f</span><span class="p">)</span>
        <span class="n">xRotNext</span> <span class="p">-=</span> <span class="m">360f</span><span class="p">;</span>

    <span class="c1">// 좌우 : FP Root 회전</span>
    <span class="kt">float</span> <span class="n">yRotPrev</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">yRotNext</span> <span class="p">=</span>
        <span class="n">yRotPrev</span> <span class="p">+</span> <span class="n">_rotation</span><span class="p">.</span><span class="n">x</span>
        <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">rotationSpeed</span> <span class="p">*</span> <span class="n">deltaCoef</span><span class="p">;</span>

    <span class="c1">// 상하 회전 가능 여부</span>
    <span class="kt">bool</span> <span class="n">xRotatable</span> <span class="p">=</span>
        <span class="n">CamOption</span><span class="p">.</span><span class="n">lookUpDegree</span> <span class="p">&lt;</span> <span class="n">xRotNext</span> <span class="p">&amp;&amp;</span>
        <span class="n">CamOption</span><span class="p">.</span><span class="n">lookDownDegree</span> <span class="p">&gt;</span> <span class="n">xRotNext</span><span class="p">;</span>

    <span class="c1">// FP Rig 상하 회전 적용</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="p">(</span><span class="n">xRotatable</span> <span class="p">?</span> <span class="n">xRotNext</span> <span class="p">:</span> <span class="n">xRotPrev</span><span class="p">);</span>

    <span class="c1">// FP Root 좌우 회전 적용</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">yRotNext</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Move</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// 이동하지 않는 경우, 미끄럼 방지</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isMoving</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span> <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="m">0f</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 실제 이동 벡터 계산</span>
    <span class="n">_worldMove</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="nf">TransformDirection</span><span class="p">(</span><span class="n">_moveDir</span><span class="p">);</span>
    <span class="n">_worldMove</span> <span class="p">*=</span> <span class="p">(</span><span class="n">MoveOption</span><span class="p">.</span><span class="n">speed</span><span class="p">)</span> <span class="p">*</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isRunning</span> <span class="p">?</span> <span class="n">MoveOption</span><span class="p">.</span><span class="n">runningCoef</span> <span class="p">:</span> <span class="m">1f</span><span class="p">);</span>

    <span class="c1">// Y축 속도는 유지하면서 XZ평면 이동</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">_worldMove</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">_worldMove</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nf">SetValuesByKeyInput</span><span class="p">();</span>
    <span class="nf">Rotate</span><span class="p">();</span>
    <span class="nf">Move</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div>  </div>

</details>

<h2 id="키보드-입력-처리">키보드 입력 처리</h2>
<ul>
  <li>SetValuesByKeyInput() 메소드</li>
  <li>지정한 이동 키(기본 WASD)를 누를 경우 이동 방향 벡터(_moveDir)를 정규화된 값으로 초기화한다.</li>
  <li>마우스를 이동할 경우 수평, 수직 이동 입력값을 _rotation 벡터의 x, y에 각각 초기화한다.</li>
  <li>이동, 달리기 입력을 통해 isMoving, isRunning 상태를 초기화한다.</li>
</ul>

<h2 id="회전">회전</h2>
<ul>
  <li>Rotate() 메소드</li>
  <li>상하 회전은 캐릭터 모델에 영향을 주지 않기 위해 FP Rig 트랜스폼의 로컬 회전 X값을 조정한다.</li>
  <li>그런데 트랜스폼의 Rotation 값은 0보다 낮아질 경우 자동적으로 360이 더해진다.</li>
  <li>
    <p>상하 회전 제한각도를 계산할 때 올바르게 계산될 수 있도록 해당 경우에는 다시 360을 빼준다.</p>
  </li>
  <li>좌우 회전은 FP Root 트랜스폼의 로컬 회전 Y값을 조정한다.</li>
  <li>캐릭터 루트를 직접 회전시킨다면 3인칭 카메라에 영향을 주기 때문에 이렇게 분리하여 회전시킨다.</li>
</ul>

<h2 id="이동">이동</h2>
<ul>
  <li>Move() 메소드</li>
  <li>실제 캐릭터의 이동 방향은 FP Root 트랜스폼 기준으로 공간변환하여 결정한다.</li>
  <li>필드를 통해 지정한 이동속도와 현재 달리기 키 입력 여부에 따른 달리기 계수를 이용해 최종 이동속도를 결정한다.</li>
  <li>속도는 리지드바디 AddForce() 대신 velocity 값을 직접 조정하는 방식을 사용하여, 속도를 정확한 값으로 제어한다.</li>
</ul>

<h2 id="추가--커서-보이기숨기기">추가 : 커서 보이기/숨기기</h2>
<ul>
  <li>커서를 보이거나 보이지 않게 하는 토글 기능을 키보드를 통해 동작할 수 있도록 한다.</li>
</ul>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">ShowCursorToggle</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">showCursor</span><span class="p">))</span>
        <span class="n">State</span><span class="p">.</span><span class="n">isCursorActive</span> <span class="p">=</span> <span class="p">!</span><span class="n">State</span><span class="p">.</span><span class="n">isCursorActive</span><span class="p">;</span>

    <span class="nf">ShowCursor</span><span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCursorActive</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">ShowCursor</span><span class="p">(</span><span class="kt">bool</span> <span class="k">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Cursor</span><span class="p">.</span><span class="n">visible</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
    <span class="n">Cursor</span><span class="p">.</span><span class="n">lockState</span> <span class="p">=</span> <span class="k">value</span> <span class="p">?</span> <span class="n">CursorLockMode</span><span class="p">.</span><span class="n">None</span> <span class="p">:</span> <span class="n">CursorLockMode</span><span class="p">.</span><span class="n">Locked</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nf">ShowCursorToggle</span><span class="p">();</span>

    <span class="c1">// .. codes</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="구현-결과">구현 결과</h2>

<ul>
  <li>게임 뷰</li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107796758-8eeb2400-6d9d-11eb-84a2-eccd2043d3b6.gif" alt="2012_0213_FPMove" class="normal" /></p>

<ul>
  <li>씬 뷰</li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107796777-93174180-6d9d-11eb-8cf9-5a66d28a67aa.gif" alt="2012_0213_FPMove2" class="normal" /></p>

<p><br /></p>

<h1 id="3인칭-이동-회전-구현">3인칭 이동, 회전 구현</h1>
<hr />

<details>
  <summary> 
Source Code
</summary>

  <div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">Rotate</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(!</span><span class="n">State</span><span class="p">.</span><span class="n">isCursorActive</span><span class="p">)</span>
            <span class="nf">RotateFP</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">State</span><span class="p">.</span><span class="n">isCursorActive</span><span class="p">)</span>
            <span class="nf">RotateTP</span><span class="p">();</span>
        <span class="nf">RotateFPRoot</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">/// &lt;summary&gt; 1인칭 회전 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">RotateFP</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">deltaCoef</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">50f</span><span class="p">;</span>

    <span class="c1">// 상하 : FP Rig 회전</span>
    <span class="kt">float</span> <span class="n">xRotPrev</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">xRotNext</span> <span class="p">=</span> <span class="n">xRotPrev</span> <span class="p">+</span> <span class="n">_rotation</span><span class="p">.</span><span class="n">y</span>
        <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">rotationSpeed</span> <span class="p">*</span> <span class="n">deltaCoef</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">xRotNext</span> <span class="p">&gt;</span> <span class="m">180f</span><span class="p">)</span>
        <span class="n">xRotNext</span> <span class="p">-=</span> <span class="m">360f</span><span class="p">;</span>

    <span class="c1">// 좌우 : FP Root 회전</span>
    <span class="kt">float</span> <span class="n">yRotPrev</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">yRotNext</span> <span class="p">=</span>
        <span class="n">yRotPrev</span> <span class="p">+</span> <span class="n">_rotation</span><span class="p">.</span><span class="n">x</span>
        <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">rotationSpeed</span> <span class="p">*</span> <span class="n">deltaCoef</span><span class="p">;</span>

    <span class="c1">// 상하 회전 가능 여부</span>
    <span class="kt">bool</span> <span class="n">xRotatable</span> <span class="p">=</span>
        <span class="n">CamOption</span><span class="p">.</span><span class="n">lookUpDegree</span> <span class="p">&lt;</span> <span class="n">xRotNext</span> <span class="p">&amp;&amp;</span>
        <span class="n">CamOption</span><span class="p">.</span><span class="n">lookDownDegree</span> <span class="p">&gt;</span> <span class="n">xRotNext</span><span class="p">;</span>

    <span class="c1">// FP Rig 상하 회전 적용</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="p">(</span><span class="n">xRotatable</span> <span class="p">?</span> <span class="n">xRotNext</span> <span class="p">:</span> <span class="n">xRotPrev</span><span class="p">);</span>

    <span class="c1">// FP Root 좌우 회전 적용</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">yRotNext</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">/// &lt;summary&gt; 3인칭 회전 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">RotateTP</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">deltaCoef</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">50f</span><span class="p">;</span>

    <span class="c1">// 상하 : TP Rig 회전</span>
    <span class="kt">float</span> <span class="n">xRotPrev</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">xRotNext</span> <span class="p">=</span> <span class="n">xRotPrev</span> <span class="p">+</span> <span class="n">_rotation</span><span class="p">.</span><span class="n">y</span>
        <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">rotationSpeed</span> <span class="p">*</span> <span class="n">deltaCoef</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">xRotNext</span> <span class="p">&gt;</span> <span class="m">180f</span><span class="p">)</span>
        <span class="n">xRotNext</span> <span class="p">-=</span> <span class="m">360f</span><span class="p">;</span>

    <span class="c1">// 좌우 : TP Rig 회전</span>
    <span class="kt">float</span> <span class="n">yRotPrev</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">yRotNext</span> <span class="p">=</span>
        <span class="n">yRotPrev</span> <span class="p">+</span> <span class="n">_rotation</span><span class="p">.</span><span class="n">x</span>
        <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">rotationSpeed</span> <span class="p">*</span> <span class="n">deltaCoef</span><span class="p">;</span>

    <span class="c1">// 상하 회전 가능 여부</span>
    <span class="kt">bool</span> <span class="n">xRotatable</span> <span class="p">=</span>
        <span class="n">CamOption</span><span class="p">.</span><span class="n">lookUpDegree</span> <span class="p">&lt;</span> <span class="n">xRotNext</span> <span class="p">&amp;&amp;</span>
        <span class="n">CamOption</span><span class="p">.</span><span class="n">lookDownDegree</span> <span class="p">&gt;</span> <span class="n">xRotNext</span><span class="p">;</span>

    <span class="n">Vector3</span> <span class="n">nextRot</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span>
    <span class="p">(</span>
        <span class="n">xRotatable</span> <span class="p">?</span> <span class="n">xRotNext</span> <span class="p">:</span> <span class="n">xRotPrev</span><span class="p">,</span>
        <span class="n">yRotNext</span><span class="p">,</span>
        <span class="m">0f</span>
    <span class="p">);</span>

    <span class="c1">// TP Rig 회전 적용</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">nextRot</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">/// &lt;summary&gt; 3인칭일 경우 FP Root 회전 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">RotateFPRoot</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isMoving</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="n">Vector3</span> <span class="n">dir</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="nf">TransformDirection</span><span class="p">(</span><span class="n">_moveDir</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">currentY</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">nextY</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="nf">LookRotation</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span><span class="p">).</span><span class="n">eulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">nextY</span> <span class="p">-</span> <span class="n">currentY</span> <span class="p">&gt;</span> <span class="m">180f</span><span class="p">)</span> <span class="n">nextY</span> <span class="p">-=</span> <span class="m">360f</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">currentY</span> <span class="p">-</span> <span class="n">nextY</span> <span class="p">&gt;</span> <span class="m">180f</span><span class="p">)</span> <span class="n">nextY</span> <span class="p">+=</span> <span class="m">360f</span><span class="p">;</span>

    <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="n">eulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">currentY</span><span class="p">,</span> <span class="n">nextY</span><span class="p">,</span> <span class="m">0.1f</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Move</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// 이동하지 않는 경우, 미끄럼 방지</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isMoving</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span> <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="m">0f</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 실제 이동 벡터 계산</span>
    <span class="c1">// 1인칭</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_worldMove</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="nf">TransformDirection</span><span class="p">(</span><span class="n">_moveDir</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// 3인칭</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">_worldMove</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="nf">TransformDirection</span><span class="p">(</span><span class="n">_moveDir</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">_worldMove</span> <span class="p">*=</span> <span class="p">(</span><span class="n">MoveOption</span><span class="p">.</span><span class="n">speed</span><span class="p">)</span> <span class="p">*</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isRunning</span> <span class="p">?</span> <span class="n">MoveOption</span><span class="p">.</span><span class="n">runningCoef</span> <span class="p">:</span> <span class="m">1f</span><span class="p">);</span>

    <span class="c1">// Y축 속도는 유지하면서 XZ평면 이동</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">_worldMove</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">_worldMove</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nf">ShowCursorToggle</span><span class="p">();</span>
    <span class="nf">SetValuesByKeyInput</span><span class="p">();</span>
    <span class="nf">Rotate</span><span class="p">();</span>
    <span class="nf">Move</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div>  </div>

</details>

<ul>
  <li>게임 시작 전, 인스펙터의 Camera Option - Initial Camera를 [Fp Camera]로 지정한다.</li>
  <li>회전, 이동 코드를 위처럼 수정한다.</li>
</ul>

<h2 id="회전-1">회전</h2>
<ul>
  <li>1인칭 회전은 기존 구현을 그대로 사용한다.</li>
  <li>3인칭 회전은 1인칭 회전과 비슷하지만 약간 다르게, TP Rig 게임오브젝트가 상하, 좌우 회전을 모두 담당한다.</li>
  <li>게임 내에서 커서가 보일 경우에는 회전하지 않도록 한다.</li>
  <li>그리고 3인칭 시점에서는 이동할 때 FP Root가 이동방향을 바라보도록 RotateFPRoot() 메소드를 구현한다.</li>
</ul>

<h2 id="이동-1">이동</h2>
<ul>
  <li>_worldMove 벡터는 1인칭, 3인칭 뷰에 따라 각각 fpRoot, tpRig 트랜스폼을 기준으로 월드 벡터를 계산하여 실제 이동 방향 벡터로 사용한다.</li>
</ul>

<h2 id="구현-결과-1">구현 결과</h2>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107802244-6c103e00-6da4-11eb-92ae-8b2404683ab2.gif" alt="2012_0213_TPMove2" class="normal" /></p>

<p><br /></p>

<h1 id="카메라-전환-기능-구현">카메라 전환 기능 구현</h1>
<hr />

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">CameraViewToggle</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">switchCamera</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span> <span class="p">=</span> <span class="p">!</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">;</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">fpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">tpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(!</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nf">ShowCursorToggle</span><span class="p">();</span>
    <span class="nf">CameraViewToggle</span><span class="p">();</span>
    <span class="nf">SetValuesByKeyInput</span><span class="p">();</span>
    <span class="nf">Rotate</span><span class="p">();</span>
    <span class="nf">Move</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>카메라 전환 키(기본 Tab)를 눌러 1인칭과 3인칭 카메라를 전환할 수 있도록 위처럼 작성한다.</li>
</ul>

<p><br /></p>

<h1 id="점프-구현">점프 구현</h1>
<hr />

<p>캐릭터가 지상에 있는지, 공중에 있는지 여부를 항상 검사해야 한다.</p>

<p>MovementOption 클래스에 다음을 추가한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="p">[</span><span class="nf">Tooltip</span><span class="p">(</span><span class="s">"지면으로 체크할 레이어 설정"</span><span class="p">)]</span>
<span class="k">public</span> <span class="n">LayerMask</span> <span class="n">groundLayerMask</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Raycast 대신 SphereCast를 통해 검사할 것이기 때문에, 반지름 정보가 필요하다.</p>

<p>캡슐 콜라이더를 사용하므로 이를 이용한다.</p>

<p>필드로 float _groundCheckRadius를 추가하고,</p>

<p>InitSettings() 메소드 하단에 아래처럼 추가로 작성한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="kt">float</span> <span class="n">_groundCheckRadius</span><span class="p">;</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">InitSettings</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// .. codes</span>

    <span class="nf">TryGetComponent</span><span class="p">(</span><span class="k">out</span> <span class="n">CapsuleCollider</span> <span class="n">cCol</span><span class="p">);</span>
    <span class="n">_groundCheckRadius</span> <span class="p">=</span> <span class="n">cCol</span> <span class="p">?</span> <span class="n">cCol</span><span class="p">.</span><span class="n">radius</span> <span class="p">:</span> <span class="m">0.1f</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>그리고 지면으로부터의 거리를 검사하여 저장하기 위한</p>

<p>float _distFromGround 필드를 추가하고, 아래의 메소드를 작성한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="c1">/// &lt;summary&gt; 땅으로부터의 거리 체크 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">CheckDistanceFromGround</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Vector3</span> <span class="n">ro</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span><span class="p">;</span>
    <span class="n">Vector3</span> <span class="n">rd</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">down</span><span class="p">;</span>
    <span class="n">Ray</span> <span class="n">ray</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Ray</span><span class="p">(</span><span class="n">ro</span><span class="p">,</span> <span class="n">rd</span><span class="p">);</span>

    <span class="k">const</span> <span class="kt">float</span> <span class="n">rayDist</span> <span class="p">=</span> <span class="m">500f</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">float</span> <span class="n">threshold</span> <span class="p">=</span> <span class="m">0.01f</span><span class="p">;</span>

    <span class="kt">bool</span> <span class="n">cast</span> <span class="p">=</span>
        <span class="n">Physics</span><span class="p">.</span><span class="nf">SphereCast</span><span class="p">(</span><span class="n">ray</span><span class="p">,</span> <span class="n">_groundCheckRadius</span><span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">hit</span><span class="p">,</span> <span class="n">rayDist</span><span class="p">,</span> <span class="n">MoveOption</span><span class="p">.</span><span class="n">groundLayerMask</span><span class="p">);</span>

    <span class="n">_distFromGround</span> <span class="p">=</span> <span class="n">cast</span> <span class="p">?</span> <span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">distance</span> <span class="p">-</span> <span class="m">1f</span> <span class="p">+</span> <span class="n">_groundCheckRadius</span><span class="p">)</span> <span class="p">:</span> <span class="kt">float</span><span class="p">.</span><span class="n">MaxValue</span><span class="p">;</span>
    <span class="n">State</span><span class="p">.</span><span class="n">isGrounded</span> <span class="p">=</span> <span class="n">_distFromGround</span> <span class="p">&lt;=</span> <span class="n">_groundCheckRadius</span> <span class="p">+</span> <span class="n">threshold</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이제 캐릭터가 지면에 닿아있을 때만 점프하도록 Jump() 메소드를 작성하고,</p>

<p>Update()에서 호출하도록 한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">Jump</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">State</span><span class="p">.</span><span class="n">isGrounded</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">jump</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="nf">AddForce</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">MoveOption</span><span class="p">.</span><span class="n">jumpForce</span><span class="p">,</span> <span class="n">ForceMode</span><span class="p">.</span><span class="n">VelocityChange</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nf">ShowCursorToggle</span><span class="p">();</span>
    <span class="nf">CameraViewToggle</span><span class="p">();</span>
    <span class="nf">SetValuesByKeyInput</span><span class="p">();</span>
    <span class="nf">CheckDistanceFromGround</span><span class="p">();</span>

    <span class="nf">Rotate</span><span class="p">();</span>
    <span class="nf">Move</span><span class="p">();</span>
    <span class="nf">Jump</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="구현-결과-2">구현 결과</h2>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/107806031-90bae480-6da9-11eb-93a5-89e40a9d954f.gif" alt="2012_0213_Jump" class="normal" /></p>

<p><br /></p>

<h1 id="애니메이션-적용하기">애니메이션 적용하기</h1>
<hr />

<p>각각의 행동에 맞는 애니메이션을 재생하기 위해 애니메이터 컨트롤러를 만들고, 애니메이션 클립을 통해 애니메이션 상태들을 만들어 서로 연결한다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108347546-faad1100-7223-11eb-963b-5c4fbb11417f.png" alt="image" class="normal" /></p>

<p>그러면 보통 이런 형태가 된다.</p>

<p>하지만 이동 애니메이션이 이동 방향에 따라 MoveForward, MoveLeft, MoveRight, MoveBackward 이렇게 나뉘어 있다면</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108347908-76a75900-7224-11eb-91e6-31e8b2a25a79.png" alt="image" class="normal" /></p>

<p>이렇게 마법진을 만들 수 있다.</p>

<p>이런 트랜지션 지옥을 피하기 위해서는 애니메이션 블렌딩을 이용해야 한다.</p>

<p><br /></p>

<h1 id="애니메이션-블렌딩">애니메이션 블렌딩</h1>
<hr />

<h2 id="애니메이션-파라미터-정의">애니메이션 파라미터 정의</h2>

<p>애니메이션 블렌딩을 하기 전에, 애니메이터 내에서 사용할 파라미터들을 정의한다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108348386-1369f680-7225-11eb-9db9-08f884d12649.png" alt="image" class="normal" /></p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>이름</th>
      <th>타입</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Move X</td>
      <td>Float</td>
      <td>로컬 X축 방향 이동 속도</td>
    </tr>
    <tr>
      <td>Move Z</td>
      <td>Float</td>
      <td>로컬 Z축 방향 이동 속도</td>
    </tr>
    <tr>
      <td>Dist Y</td>
      <td>Float</td>
      <td>캐릭터와 지면 사이의 Y축 거리</td>
    </tr>
    <tr>
      <td>Grounded</td>
      <td>Bool</td>
      <td>캐릭터가 땅과 닿아 있는지 여부</td>
    </tr>
    <tr>
      <td>Jump</td>
      <td>Trigger</td>
      <td>점프 명령</td>
    </tr>
  </tbody>
</table></div>

<p>그리고 스크립트에서 해당 파라미터 이름들을 변수로 지정할 수 있도록 이를 관리하는 클래스를 만든다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">AnimatorOption</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">paramMoveX</span> <span class="p">=</span> <span class="s">"Move X"</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">paramMoveZ</span> <span class="p">=</span> <span class="s">"Move Z"</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">paramDistY</span> <span class="p">=</span> <span class="s">"Dist Y"</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">paramGrounded</span> <span class="p">=</span> <span class="s">"Grounded"</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">paramJump</span> <span class="p">=</span> <span class="s">"Jump"</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">public</span> <span class="n">AnimatorOption</span> <span class="n">AnimOption</span> <span class="p">=&gt;</span> <span class="n">_animatorOption</span><span class="p">;</span>

<span class="p">[</span><span class="n">Space</span><span class="p">]</span>
<span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">AnimatorOption</span> <span class="n">_animatorOption</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">AnimatorOption</span><span class="p">();</span>
</pre></td></tr></tbody></table></code></div></div>

<p>애니메이션 파라미터들을 전달하기 위한 메소드를 작성한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre></td><td class="rouge-code"><pre><span class="c1">// Lerp를 위한 변수들</span>
<span class="k">private</span> <span class="kt">float</span> <span class="n">_moveX</span><span class="p">;</span>
<span class="k">private</span> <span class="kt">float</span> <span class="n">_moveZ</span><span class="p">;</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">UpdateAnimationParams</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="n">z</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">x</span> <span class="p">=</span> <span class="n">_moveDir</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">z</span> <span class="p">=</span> <span class="n">_moveDir</span><span class="p">.</span><span class="n">z</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isRunning</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">x</span> <span class="p">*=</span> <span class="m">2f</span><span class="p">;</span>
            <span class="n">z</span> <span class="p">*=</span> <span class="m">2f</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">x</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
        <span class="n">z</span> <span class="p">=</span> <span class="n">_moveDir</span><span class="p">.</span><span class="n">sqrMagnitude</span> <span class="p">&gt;</span> <span class="m">0f</span> <span class="p">?</span> <span class="m">1f</span> <span class="p">:</span> <span class="m">0f</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isRunning</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">z</span> <span class="p">*=</span> <span class="m">2f</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// 보간</span>
    <span class="k">const</span> <span class="kt">float</span> <span class="n">LerpSpeed</span> <span class="p">=</span> <span class="m">0.05f</span><span class="p">;</span>
    <span class="n">_moveX</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">_moveX</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">LerpSpeed</span><span class="p">);</span>
    <span class="n">_moveZ</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">_moveZ</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">LerpSpeed</span><span class="p">);</span>

    <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetFloat</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramMoveX</span><span class="p">,</span> <span class="n">_moveX</span><span class="p">);</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetFloat</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramMoveZ</span><span class="p">,</span> <span class="n">_moveZ</span><span class="p">);</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetFloat</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramDistY</span><span class="p">,</span> <span class="n">_distFromGround</span><span class="p">);</span>
    <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetBool</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramGrounded</span><span class="p">,</span> <span class="n">State</span><span class="p">.</span><span class="n">isGrounded</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>1인칭에서는 전후좌우 모두 이동하지만, 3인칭에서는 어차피 이동방향으로 항상 바라보므로 전방 이동 애니메이션만 적용하면 된다.</p>

<p>따라서 3인칭의 경우 Move Z에 이동 시 1, 정지 시 0을 전달하면 된다.</p>

<p>애니메이션은 각 파라미터에 의존하여 실행되므로, 0과 1만 전달하면 뚝뚝 끊기므로 Move X, Z는 Lerp 계산을 통해 부드럽게 보간하여 전달한다.</p>

<p>그리고 Update() 맨 아래에서 위의 메소드를 호출한다.</p>

<p><br /></p>

<h2 id="idle_move-블렌드-트리-생성">IDLE_MOVE 블렌드 트리 생성</h2>

<p>애니메이터 컨트롤러에서 Create State - From New Blend Tree 를 통해 새로운 블렌드 트리를 만든다.</p>

<p>그리고 Idle 1개, Walk 4개(Front, Back, Left, Right), Run 4개 총 9개의 애니메이션을 준비한다.</p>

<p>각각의 Back 애니메이션이 존재하지 않을 경우, Front를 역재생하는 방식으로 사용할 수 있다.</p>

<p>2D Freeform Directional을 선택하여 아래처럼 블렌드 트리를 완성한다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108351624-1ebf2100-7229-11eb-986f-30b744171ffe.png" alt="image" class="normal" /></p>

<ul>
  <li>실행 결과</li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108353850-f4229780-722b-11eb-8788-85bf521225fc.gif" alt="2021_0218_SmoothMove" class="normal" /></p>

<p><br /></p>

<h2 id="점프-애니메이션">점프 애니메이션</h2>

<p>정지 및 이동 애니메이션을 완성했으므로, 이제 점프 애니메이션도 적용해야 한다.</p>

<p>점프 애니메이션을 위한 고려사항들은 다음과 같다.</p>

<blockquote>
  <ul>
    <li>점프할 때 [정지 -&gt; 점프] 까지 부드럽게 연결되는 애니메이션이 재생되어야 한다.</li>
    <li>점프 이후, 착지하기 전까지 [최고점의 점프 애니메이션]이 반복 재생되어야 한다.</li>
    <li>착지할 때 [점프 -&gt; 정지] 까지 부드럽게 연결되는 애니메이션이 재생되어야 한다.</li>
  </ul>
</blockquote>

<p>그리고 이에 적용할 수 있는 애니메이션 파라미터들은 다음과 같다.</p>

<blockquote>
  <ul>
    <li>점프하는 순간에 활성화시킬 Jump 트리거</li>
    <li>캐릭터와 지면 사이의 높이값 Dist Y (Float)</li>
    <li>캐릭터의 Y축 위치 상태를 나타내는 Grounded (Bool)</li>
  </ul>
</blockquote>

<p>위의 요소들을 고려하여 애니메이션들을 준비한다.</p>

<ul>
  <li>
    <h3 id="1-jump_up">1. Jump_Up</h3>
  </li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108356998-3352e780-7230-11eb-9bb4-2d776b133e11.gif" alt="2021_0218_Anim_Jump1" class="normal" /></p>

<ul>
  <li>
    <h3 id="2-jump_up_loop">2. Jump_Up_Loop</h3>
  </li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108357003-351cab00-7230-11eb-978d-edd54f02a217.gif" alt="2021_0218_Anim_Jump2" class="normal" /></p>

<ul>
  <li>
    <h3 id="3-jump_down">3. Jump_Down</h3>
  </li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108357005-35b54180-7230-11eb-800f-8d55dfb9aa46.gif" alt="2021_0218_Anim_Jump3" class="normal" /></p>

<p><br /></p>

<h2 id="jump_down-블렌드-트리-생성">JUMP_DOWN 블렌드 트리 생성</h2>

<p>Jump_Up 애니메이션은 그대로 하나의 상태로 애니메이터에 넣는다.</p>

<p>Jump_Loop와 Jump_Down은 블렌드 트리로 묶고 1D로 설정, 파라미터는 Dist Y로 지정한다.</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108358253-d7895e00-7231-11eb-973f-6c23502fb28c.png" alt="image" class="normal" /></p>

<p><br /></p>

<h2 id="트랜지션-설정">트랜지션 설정</h2>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108544038-38e02880-7329-11eb-95e4-f267ab65603f.png" alt="image" class="normal" /></p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>트랜지션</th>
      <th>조건</th>
      <th>Has Exit Time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>IDLE_MOVE-&gt;JUMP_UP</td>
      <td>Jump(Trigger)</td>
      <td>false</td>
    </tr>
    <tr>
      <td>JUMP_UP-&gt;JUMP_DOWN</td>
      <td>없음</td>
      <td>true</td>
    </tr>
    <tr>
      <td>JUMP_DOWN-&gt;JUMP_UP</td>
      <td>Jump(Trigger)</td>
      <td>false</td>
    </tr>
    <tr>
      <td>JUMP_DOWN-&gt;IDLE_MOVE</td>
      <td>Grounded == true</td>
      <td>false</td>
    </tr>
  </tbody>
</table></div>

<p><br /></p>

<h2 id="실행-결과">실행 결과</h2>

<ul>
  <li>평지에서의 점프</li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108359420-5337da80-7233-11eb-8a85-5e51f97fb987.gif" alt="2021_0218_JumpTest1" class="normal" /></p>

<ul>
  <li>고지에서 점프 후 하강</li>
</ul>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108359426-55019e00-7233-11eb-8278-ea0b1533fbf9.gif" alt="2021_0218_JumpTest2" class="normal" /></p>

<p>의도대로 동작하며, 부드럽게 이어진다.</p>

<p><br /></p>

<h1 id="카메라-전환-시-시점-방향-유지하기">카메라 전환 시 시점 방향 유지하기</h1>
<hr />

<p>탭 키를 눌러 1인칭, 3인칭 카메라를 서로 전환할 경우</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108360636-cbeb6680-7234-11eb-99d6-74b9600178c5.gif" alt="2021_0218_ChangeCamView" class="normal" /></p>

<p>이렇게 각각의 카메라가 원래 향하고 있던 방향으로 돌아가서 보이게 된다.</p>

<p>카메라를 전환할 때 이전의 카메라가 보고 있던 방향을 전환 후 카메라가 바라볼 수 있게 하려고 한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">CameraViewToggle</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">switchCamera</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span> <span class="p">=</span> <span class="p">!</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">;</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">fpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">tpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(!</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>

        <span class="c1">// TP -&gt; FP</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Vector3</span> <span class="n">tpEulerAngle</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">;</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="n">tpEulerAngle</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">tpEulerAngle</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// FP -&gt; TP</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">Vector3</span> <span class="n">newRot</span> <span class="p">=</span> <span class="k">default</span><span class="p">;</span>
            <span class="n">newRot</span><span class="p">.</span><span class="n">x</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="n">newRot</span><span class="p">.</span><span class="n">y</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRoot</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">newRot</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>CameraViewToggle() 메소드를 위와 같이 수정한다.</p>

<p>1인칭 시점에서는 fpRig 트랜스폼이 x 회전을, fpRoot 트랜스폼이 y 회전을 담당하고</p>

<p>3인칭 시점에서는 tpRig 트랜스폼이 x, y 회전을 모두 담당하므로</p>

<p>위처럼 나누어 전달한다.</p>

<h2 id="실행-결과-1">실행 결과</h2>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108367406-c98d0a80-723c-11eb-877e-013a9df970a8.gif" alt="2021_0218_CamRotation" class="normal" /></p>

<p>카메라 전환 시 이전 카메라의 회전을 유지하는 것을 확인할 수 있다.</p>

<p><br /></p>

<h1 id="3인칭-카메라-줌-구현하기">3인칭 카메라 줌 구현하기</h1>
<hr />

<p>3인칭 카메라 모드일 때만, 휠 입력을 받아서 카메라 줌 기능을 구현하려고 한다.</p>

<p>3인칭 카메라를 카메라가 바라보는 방향(transform.foward)으로 이동시키면 줌 인, 반대 방향으로 이동시키면 줌 아웃을 구현할 수 있다.</p>

<p>CameraOption 클래스에 다음처럼 필드를 작성한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span> <span class="m">3.5f</span><span class="p">),</span> <span class="n">Space</span><span class="p">,</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"줌 확대 최대 거리"</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">float</span> <span class="n">zoomInDistance</span> <span class="p">=</span> <span class="m">3f</span><span class="p">;</span>

<span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span> <span class="m">5f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"줌 축소 최대 거리"</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">float</span> <span class="n">zoomOutDistance</span> <span class="p">=</span> <span class="m">3f</span><span class="p">;</span>

<span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">1f</span><span class="p">,</span> <span class="m">20f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"줌 속도"</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">float</span> <span class="n">zoomSpeed</span> <span class="p">=</span> <span class="m">10f</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p>그리고 스크립트 내에 필드를 더 추가한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1">/// &lt;summary&gt; TP 카메라 ~ Rig 초기 거리 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="kt">float</span> <span class="n">_tpCamZoomInitialDistance</span><span class="p">;</span>

<span class="c1">/// &lt;summary&gt; TP 카메라 휠 입력 값 &lt;/summary&gt;</span>
<span class="k">private</span> <span class="kt">float</span> <span class="n">_tpCameraWheelInput</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p>게임 시작 시 _tpCamZoomInitialDistance 필드에 TP Camera, TP Rig 사이의 거리를 측정하고 게임 내에서 해당 값을 기준으로 줌인/줌아웃 기능을 사용하게 된다.</p>

<p>InitSettings() 메소드 블록 내 최하단에 다음과 같이 작성하여 초기 줌 거리를 측정한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">_tpCamZoomInitialDistance</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">Distance</span><span class="p">(</span><span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></div></div>

<p>그리고 SetValuesByKeyInput() 메소드 하단에도 마찬가지로 다음 한줄을 추가하여 휠 입력값을 받아오도록 한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">_tpCameraWheelInput</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxisRaw</span><span class="p">(</span><span class="s">"Mouse ScrollWheel"</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></div></div>

<p>마지막으로 새로운 메소드를 작성하고, Update() 블록 내부 하단에서 호출해준다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">TpCameraZoom</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>         <span class="c1">// TP 카메라만 가능</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_tpCameraWheelInput</span> <span class="p">==</span> <span class="m">0f</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// 휠 입력 있어야 가능</span>

    <span class="n">Transform</span> <span class="n">tpCamTr</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span>
    <span class="n">Transform</span> <span class="n">tpCamRig</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">;</span>

    <span class="kt">float</span> <span class="n">zoom</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomSpeed</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">currentCamToRigDist</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">Distance</span><span class="p">(</span><span class="n">tpCamTr</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">tpCamRig</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
    <span class="n">Vector3</span> <span class="n">move</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">zoom</span><span class="p">;</span>

    <span class="c1">// Zoom In</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_tpCameraWheelInput</span> <span class="p">&gt;</span> <span class="m">0.01f</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_tpCamZoomInitialDistance</span> <span class="p">-</span> <span class="n">currentCamToRigDist</span> <span class="p">&lt;</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomInDistance</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">tpCamTr</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(</span><span class="n">move</span><span class="p">,</span> <span class="n">Space</span><span class="p">.</span><span class="n">Self</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// Zoom Out</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">_tpCameraWheelInput</span> <span class="p">&lt;</span> <span class="p">-</span><span class="m">0.01f</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">currentCamToRigDist</span> <span class="p">-</span> <span class="n">_tpCamZoomInitialDistance</span> <span class="p">&lt;</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomOutDistance</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">tpCamTr</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(-</span><span class="n">move</span><span class="p">,</span> <span class="n">Space</span><span class="p">.</span><span class="n">Self</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>
<p><br /></p>

<h2 id="추가--부드러운-줌-구현하기">추가 : 부드러운 줌 구현하기</h2>

<p>Lerp를 이용하여 부드러운 줌을 구현할 수 있다.</p>

<p>우선 CameraOption 클래스에 다음 필드를 추가한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">0.01f</span><span class="p">,</span> <span class="m">0.5f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"줌 가속"</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">float</span> <span class="n">zoomAccel</span> <span class="p">=</span> <span class="m">0.1f</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p>zoomAccel 값이 작을수록 줌이 부드럽게 연결되고, 더 오래 지속된다. 반대로 이 값이 클수록 줌이 더 빨라진다.</p>

<p>그리고 SetValuesByKeyInput() 메소드 하단의 줌 입력받는 문장을</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">_tpCameraWheelInput</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxisRaw</span><span class="p">(</span><span class="s">"Mouse ScrollWheel"</span><span class="p">);</span>
<span class="n">_currentWheel</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">_currentWheel</span><span class="p">,</span> <span class="n">_tpCameraWheelInput</span><span class="p">,</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomAccel</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 수정하고,</p>

<p>TpCameraZoom() 메소드를</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">TpCameraZoom</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>                <span class="c1">// TP 카메라만 가능</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Mathf</span><span class="p">.</span><span class="nf">Abs</span><span class="p">(</span><span class="n">_currentWheel</span><span class="p">)</span> <span class="p">&lt;</span> <span class="m">0.01f</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// 휠 입력 있어야 가능</span>

    <span class="n">Transform</span> <span class="n">tpCamTr</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span>
    <span class="n">Transform</span> <span class="n">tpCamRig</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">;</span>

    <span class="kt">float</span> <span class="n">zoom</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomSpeed</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">currentCamToRigDist</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">Distance</span><span class="p">(</span><span class="n">tpCamTr</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">tpCamRig</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
    <span class="n">Vector3</span> <span class="n">move</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">zoom</span> <span class="p">*</span> <span class="n">_currentWheel</span> <span class="p">*</span> <span class="m">10f</span><span class="p">;</span>

    <span class="c1">// Zoom In</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_currentWheel</span> <span class="p">&gt;</span> <span class="m">0.01f</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_tpCamZoomInitialDistance</span> <span class="p">-</span> <span class="n">currentCamToRigDist</span> <span class="p">&lt;</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomInDistance</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">tpCamTr</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(</span><span class="n">move</span><span class="p">,</span> <span class="n">Space</span><span class="p">.</span><span class="n">Self</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// Zoom Out</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">_currentWheel</span> <span class="p">&lt;</span> <span class="p">-</span><span class="m">0.01f</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">currentCamToRigDist</span> <span class="p">-</span> <span class="n">_tpCamZoomInitialDistance</span> <span class="p">&lt;</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomOutDistance</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">tpCamTr</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(</span><span class="n">move</span><span class="p">,</span> <span class="n">Space</span><span class="p">.</span><span class="n">Self</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 수정해준다.</p>

<p><br /></p>
<h2 id="실행-결과-2">실행 결과</h2>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108523951-de879d80-7311-11eb-8d61-3cdee92dc206.gif" alt="2021_0220_FpTpZoom" class="normal" /></p>

<p><br /></p>

<h1 id="점프-버그-수정하기">점프 버그 수정하기</h1>
<hr />

<h2 id="깨알팁-timedeltatime-캐싱하기">(깨알팁) Time.deltaTime 캐싱하기</h2>

<p>이 스크립트에서는 Time.deltaTime을 여러 번 사용하므로, 매 Update마다 필드에 저장하여 공통으로 사용하도록 한다.</p>

<p>성능 상 이득을 얻을 수 있다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="kt">float</span> <span class="n">_deltaTime</span><span class="p">;</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">_deltaTime</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<h2 id="다중-점프-버그">다중 점프 버그</h2>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108530888-691fcb00-7319-11eb-9c52-62675be3bba4.gif" alt="2021_0220_InfiniteJump" class="normal" /></p>

<p>지형을 이용하면 순간적으로 점프 입력키를 빠르게 연타하여 한 번에 많이 점프할 수 있다.</p>

<p>이를 고치기 위해서는 점프에 짧은 쿨타임을 부여하면 된다.</p>

<p>MovementOption 클래스 내에 점프 쿨타임을 지정할 필드를 만들어준다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">2.0f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"점프 쿨타임"</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">float</span> <span class="n">jumpCooldown</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p>그리고 현재 스크립트에 점프 쿨타임 지속시간을 기억할 필드를 추가한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="kt">float</span> <span class="n">_currentJumpCooldown</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Jump() 메소드를 다음처럼 수정한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">Jump</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">State</span><span class="p">.</span><span class="n">isGrounded</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_currentJumpCooldown</span> <span class="p">&gt;</span> <span class="m">0f</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// 점프 쿨타임</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">jump</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"JUMP"</span><span class="p">);</span>

        <span class="c1">// 하강 중 점프 시 속도가 합산되지 않도록 속도 초기화</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">zero</span><span class="p">;</span>

        <span class="n">Com</span><span class="p">.</span><span class="n">rBody</span><span class="p">.</span><span class="nf">AddForce</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">MoveOption</span><span class="p">.</span><span class="n">jumpForce</span><span class="p">,</span> <span class="n">ForceMode</span><span class="p">.</span><span class="n">VelocityChange</span><span class="p">);</span>

        <span class="c1">// 애니메이션 점프 트리거</span>
        <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetTrigger</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramJump</span><span class="p">);</span>

        <span class="c1">// 쿨타임 초기화</span>
        <span class="n">_currentJumpCooldown</span> <span class="p">=</span> <span class="n">MoveOption</span><span class="p">.</span><span class="n">jumpCooldown</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>점프 쿨타임에 걸려 있으면 점프가 불가능하도록 해주었고,</p>

<p>점프할 때 다시 쿨타임이 시작되록 하였다.</p>

<p>그리고 하강 중 점프할 때 점프가 제대로 되지 않는 버그도 추가로 수정해주었다.</p>

<p>이제 실시간으로 쿨타임을 계산해줄 메소드를 만들고, Update()에서 호출하도록 한다.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">UpdateCurrentValues</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">_currentJumpCooldown</span> <span class="p">&gt;</span> <span class="m">0f</span><span class="p">)</span>
        <span class="n">_currentJumpCooldown</span> <span class="p">-=</span> <span class="n">_deltaTime</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="nf">UpdateCurrentValues</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="결과">결과</h2>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/42164422/108545079-ab9dd380-732a-11eb-8ab3-14177988221d.gif" alt="2021_0220_JumpFix" class="normal" /></p>

<p>이제 올바르게 점프할 수 있다.</p>

<p><br /></p>

<h1 id="이동-스크립트-분리하기">이동 스크립트 분리하기</h1>
<hr />

<p>이동 기능은 Transform, Rigidbody, Character Controller, … 등등 여러가지 방법으로 다양하게 구현할 수 있으며, 간단하게 구현할 수도, 아주 복잡하고 섬세하게 구현할 수도 있다.</p>

<p>이를 대비하여 이동 기능을 완전히 분리하여 다른 스크립트에 작성하고, 해당 스크립트(컴포넌트)에는 이동 명령 시 월드 이동 벡터, 점프 시 점프 여부만 간단히 전달하도록 캐릭터 메인 컨트롤러 스크립트를 수정한다.</p>

<p>그리고 월드 이동 벡터는 Y 값은 0으로 두고 XZ 값만 전달해야 하는데, 현재로서는 3인칭의 경우 상하 및 좌우 회전이 통합되어 있으므로 정확한 값을 전달할 수 없다.</p>

<p>따라서 하이라키 구조를 변경하고 회전 기능도 수정하였으며, 다음 포스팅에서 물리 기반 이동을 구현한다.</p>

<p><br /></p>

<h1 id="source-code">Source Code</h1>
<hr />

<details>
  <summary> 
CharacterMainController.cs
</summary>

  <div class="language-cs highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
</pre></td><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="c1">// 날짜 : 2021-02-12 PM 7:45:19</span>
<span class="c1">// 작성자 : Rito</span>

<span class="k">namespace</span> <span class="nn">Rito.CharacterControl</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">CharacterMainController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
    <span class="p">{</span>
        <span class="cm">/*

            [하이라키 구조]

            Character Root [ CharacterMainController, Movement3D, Rigidbody, Capsule Collider ]
              ㄴTP Root    [ Pos(0,   1,   0) , Rot(0,  0, 0) ]
                ㄴTP Rig   [ Pos(0,   0,   0) , Rot(0, 45, 0) ]
                  ㄴTP Cam [ Pos(0,   0,  -4) , Rot(0,  0, 0), Camera Component ]
              ㄴWalker     [ Pos(0,   1,   0) , Rot(0,  0, 0) ]
                ㄴFP Rig   [ Pos(0, 1.3, 0.2) , Rot(0,  0, 0) ]
                  ㄴFP Cam [ Pos(0, 1.3, 0.2) , Rot(0,  0, 0), Camera Component ]
                ㄴModel Root

        */</span>

        <span class="cm">/***********************************************************************
        *                               Definitions
        ***********************************************************************/</span>
        <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
        <span class="k">public</span> <span class="k">enum</span> <span class="n">CameraType</span> <span class="p">{</span> <span class="n">FpCamera</span><span class="p">,</span> <span class="n">TpCamera</span> <span class="p">};</span>

        <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">class</span> <span class="nc">Components</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="n">Camera</span> <span class="n">tpCamera</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">Camera</span> <span class="n">fpCamera</span><span class="p">;</span>

            <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Transform</span> <span class="n">tpRoot</span><span class="p">;</span>
            <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Transform</span> <span class="n">tpRig</span><span class="p">;</span>
            <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Transform</span> <span class="n">walker</span><span class="p">;</span>
            <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Transform</span> <span class="n">fpRig</span><span class="p">;</span>

            <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">GameObject</span> <span class="n">tpCamObject</span><span class="p">;</span>
            <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">GameObject</span> <span class="n">fpCamObject</span><span class="p">;</span>

            <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">Animator</span> <span class="n">anim</span><span class="p">;</span>
            <span class="p">[</span><span class="n">HideInInspector</span><span class="p">]</span> <span class="k">public</span> <span class="n">IMovement3D</span> <span class="n">movement3D</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">class</span> <span class="nc">KeyOption</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">moveForward</span>  <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">W</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">moveBackward</span> <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">S</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">moveLeft</span>     <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">A</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">moveRight</span>    <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">D</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">run</span>  <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">LeftShift</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">jump</span> <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">Space</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">switchCamera</span> <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">Tab</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">KeyCode</span> <span class="n">showCursor</span> <span class="p">=</span> <span class="n">KeyCode</span><span class="p">.</span><span class="n">LeftAlt</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">class</span> <span class="nc">CameraOption</span>
        <span class="p">{</span>
            <span class="p">[</span><span class="nf">Tooltip</span><span class="p">(</span><span class="s">"게임 시작 시 카메라"</span><span class="p">)]</span>
            <span class="k">public</span> <span class="n">CameraType</span> <span class="n">initialCamera</span><span class="p">;</span>

            <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">1f</span><span class="p">,</span> <span class="m">10f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"카메라 상하좌우 회전 속도"</span><span class="p">)]</span>
            <span class="k">public</span> <span class="kt">float</span> <span class="n">rotationSpeed</span> <span class="p">=</span> <span class="m">2f</span><span class="p">;</span>

            <span class="p">[</span><span class="nf">Range</span><span class="p">(-</span><span class="m">90f</span><span class="p">,</span> <span class="m">0f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"올려다보기 제한 각도"</span><span class="p">)]</span>
            <span class="k">public</span> <span class="kt">float</span> <span class="n">lookUpDegree</span> <span class="p">=</span> <span class="p">-</span><span class="m">60f</span><span class="p">;</span>

            <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span> <span class="m">75f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"내려다보기 제한 각도"</span><span class="p">)]</span>
            <span class="k">public</span> <span class="kt">float</span> <span class="n">lookDownDegree</span> <span class="p">=</span> <span class="m">75f</span><span class="p">;</span>

            <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span> <span class="m">3.5f</span><span class="p">),</span> <span class="n">Space</span><span class="p">,</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"줌 확대 최대 거리"</span><span class="p">)]</span>
            <span class="k">public</span> <span class="kt">float</span> <span class="n">zoomInDistance</span> <span class="p">=</span> <span class="m">3f</span><span class="p">;</span>

            <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span> <span class="m">5f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"줌 축소 최대 거리"</span><span class="p">)]</span>
            <span class="k">public</span> <span class="kt">float</span> <span class="n">zoomOutDistance</span> <span class="p">=</span> <span class="m">3f</span><span class="p">;</span>

            <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">1f</span><span class="p">,</span> <span class="m">30f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"줌 속도"</span><span class="p">)]</span>
            <span class="k">public</span> <span class="kt">float</span> <span class="n">zoomSpeed</span> <span class="p">=</span> <span class="m">20f</span><span class="p">;</span>

            <span class="p">[</span><span class="nf">Range</span><span class="p">(</span><span class="m">0.01f</span><span class="p">,</span> <span class="m">0.5f</span><span class="p">),</span> <span class="nf">Tooltip</span><span class="p">(</span><span class="s">"줌 가속"</span><span class="p">)]</span>
            <span class="k">public</span> <span class="kt">float</span> <span class="n">zoomAccel</span> <span class="p">=</span> <span class="m">0.1f</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">class</span> <span class="nc">AnimatorOption</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="kt">string</span> <span class="n">paramMoveX</span> <span class="p">=</span> <span class="s">"Move X"</span><span class="p">;</span>
            <span class="k">public</span> <span class="kt">string</span> <span class="n">paramMoveZ</span> <span class="p">=</span> <span class="s">"Move Z"</span><span class="p">;</span>
            <span class="k">public</span> <span class="kt">string</span> <span class="n">paramDistY</span> <span class="p">=</span> <span class="s">"Dist Y"</span><span class="p">;</span>
            <span class="k">public</span> <span class="kt">string</span> <span class="n">paramGrounded</span> <span class="p">=</span> <span class="s">"Grounded"</span><span class="p">;</span>
            <span class="k">public</span> <span class="kt">string</span> <span class="n">paramJump</span> <span class="p">=</span> <span class="s">"Jump"</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">class</span> <span class="nc">CharacterState</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="kt">bool</span> <span class="n">isCurrentFp</span><span class="p">;</span>
            <span class="k">public</span> <span class="kt">bool</span> <span class="n">isMoving</span><span class="p">;</span>
            <span class="k">public</span> <span class="kt">bool</span> <span class="n">isRunning</span><span class="p">;</span>
            <span class="k">public</span> <span class="kt">bool</span> <span class="n">isGrounded</span><span class="p">;</span>
            <span class="k">public</span> <span class="kt">bool</span> <span class="n">isCursorActive</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="err">#</span><span class="n">endregion</span>
        <span class="cm">/***********************************************************************
        *                               Fields, Properties
        ***********************************************************************/</span>
        <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
        <span class="k">public</span> <span class="n">Components</span> <span class="n">Com</span> <span class="p">=&gt;</span> <span class="n">_components</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">KeyOption</span> <span class="n">Key</span> <span class="p">=&gt;</span> <span class="n">_keyOption</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">CameraOption</span>   <span class="n">CamOption</span>  <span class="p">=&gt;</span> <span class="n">_cameraOption</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">AnimatorOption</span> <span class="n">AnimOption</span> <span class="p">=&gt;</span> <span class="n">_animatorOption</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">CharacterState</span> <span class="n">State</span> <span class="p">=&gt;</span> <span class="n">_state</span><span class="p">;</span>

        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">Components</span> <span class="n">_components</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Components</span><span class="p">();</span>
        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">KeyOption</span> <span class="n">_keyOption</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">KeyOption</span><span class="p">();</span>
        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">CameraOption</span>   <span class="n">_cameraOption</span>   <span class="p">=</span> <span class="k">new</span> <span class="nf">CameraOption</span><span class="p">();</span>
        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">AnimatorOption</span> <span class="n">_animatorOption</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">AnimatorOption</span><span class="p">();</span>
        <span class="p">[</span><span class="n">Space</span><span class="p">,</span> <span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">CharacterState</span> <span class="n">_state</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CharacterState</span><span class="p">();</span>

        <span class="c1">/// &lt;summary&gt; Time.deltaTime 항상 저장 &lt;/summary&gt;</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">_deltaTime</span><span class="p">;</span>

        <span class="c1">/// &lt;summary&gt; 마우스 움직임을 통해 얻는 회전 값 &lt;/summary&gt;</span>
        <span class="k">private</span> <span class="n">Vector2</span> <span class="n">_rotation</span><span class="p">;</span>


        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">_distFromGround</span><span class="p">;</span>

        <span class="c1">// Animation Params</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">_moveX</span><span class="p">;</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">_moveZ</span><span class="p">;</span>


        <span class="c1">/// &lt;summary&gt; TP 카메라 ~ Rig 초기 거리 &lt;/summary&gt;</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">_tpCamZoomInitialDistance</span><span class="p">;</span>

        <span class="c1">/// &lt;summary&gt; TP 카메라 휠 입력 값 &lt;/summary&gt;</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">_tpCameraWheelInput</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

        <span class="c1">/// &lt;summary&gt; 선형보간된 현재 휠 입력 값 &lt;/summary&gt;</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">_currentWheel</span><span class="p">;</span>



        <span class="c1">// Current Movement Variables</span>

        <span class="c1">/// &lt;summary&gt; 키보드 WASD 입력으로 얻는 로컬 이동 벡터 &lt;/summary&gt;</span>
        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
        <span class="k">private</span> <span class="n">Vector3</span> <span class="n">_moveDir</span><span class="p">;</span>

        <span class="c1">/// &lt;summary&gt; 월드 이동 벡터 &lt;/summary&gt;</span>
        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
        <span class="k">private</span> <span class="n">Vector3</span> <span class="n">_worldMoveDir</span><span class="p">;</span>

        <span class="err">#</span><span class="n">endregion</span>

        <span class="cm">/***********************************************************************
        *                               Unity Events
        ***********************************************************************/</span>
        <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nf">InitComponents</span><span class="p">();</span>
            <span class="nf">InitSettings</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">_deltaTime</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>

            <span class="c1">// 1. Check, Key Input</span>
            <span class="nf">ShowCursorToggle</span><span class="p">();</span>
            <span class="nf">CameraViewToggle</span><span class="p">();</span>
            <span class="nf">SetValuesByKeyInput</span><span class="p">();</span>

            <span class="c1">// 2. Behaviors, Camera Actions</span>
            <span class="nf">Rotate</span><span class="p">();</span>
            <span class="nf">TpCameraZoom</span><span class="p">();</span>

            <span class="c1">// 3. Updates</span>
            <span class="nf">CheckGroundDistance</span><span class="p">();</span>
            <span class="nf">UpdateAnimationParams</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="err">#</span><span class="n">endregion</span>
        <span class="cm">/***********************************************************************
        *                               Init Methods
        ***********************************************************************/</span>
        <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">InitComponents</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nf">LogNotInitializedComponentError</span><span class="p">(</span><span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">,</span> <span class="s">"TP Camera"</span><span class="p">);</span>
            <span class="nf">LogNotInitializedComponentError</span><span class="p">(</span><span class="n">Com</span><span class="p">.</span><span class="n">fpCamera</span><span class="p">,</span> <span class="s">"FP Camera"</span><span class="p">);</span>
            
            <span class="n">Com</span><span class="p">.</span><span class="n">anim</span> <span class="p">=</span> <span class="n">GetComponentInChildren</span><span class="p">&lt;</span><span class="n">Animator</span><span class="p">&gt;();</span>

            <span class="n">Com</span><span class="p">.</span><span class="n">tpCamObject</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">.</span><span class="n">gameObject</span><span class="p">;</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">parent</span><span class="p">;</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">tpRoot</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">parent</span><span class="p">;</span>

            <span class="n">Com</span><span class="p">.</span><span class="n">fpCamObject</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpCamera</span><span class="p">.</span><span class="n">gameObject</span><span class="p">;</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpCamera</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">parent</span><span class="p">;</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">walker</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">parent</span><span class="p">;</span>

            <span class="nf">TryGetComponent</span><span class="p">(</span><span class="k">out</span> <span class="n">Com</span><span class="p">.</span><span class="n">movement3D</span><span class="p">);</span>
            <span class="c1">//if(Com.movement3D == null)</span>
            <span class="c1">//    Com.movement3D = gameObject.AddComponent&lt;PhysicsBasedMovement&gt;();</span>
                <span class="c1">//Com.pbMove = gameObject.AddComponent&lt;Test.PBMove2&gt;();</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">InitSettings</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// 모든 카메라 게임오브젝트 비활성화</span>
            <span class="kt">var</span> <span class="n">allCams</span> <span class="p">=</span> <span class="n">FindObjectsOfType</span><span class="p">&lt;</span><span class="n">Camera</span><span class="p">&gt;();</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">cam</span> <span class="k">in</span> <span class="n">allCams</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">cam</span><span class="p">.</span><span class="n">gameObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// 설정한 카메라 하나만 활성화</span>
            <span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span> <span class="p">=</span> <span class="p">(</span><span class="n">CamOption</span><span class="p">.</span><span class="n">initialCamera</span> <span class="p">==</span> <span class="n">CameraType</span><span class="p">.</span><span class="n">FpCamera</span><span class="p">);</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">fpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">tpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(!</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>

            <span class="c1">// Zoom</span>
            <span class="n">_tpCamZoomInitialDistance</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">Distance</span><span class="p">(</span><span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="err">#</span><span class="n">endregion</span>
        <span class="cm">/***********************************************************************
        *                               Check Methods
        ***********************************************************************/</span>
        <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
        <span class="k">private</span> <span class="k">void</span> <span class="n">LogNotInitializedComponentError</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">T</span> <span class="n">component</span><span class="p">,</span> <span class="kt">string</span> <span class="n">componentName</span><span class="p">)</span> <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="n">Component</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">component</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
                <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">componentName</span><span class="p">}</span><span class="s"> 컴포넌트를 인스펙터에 넣어주세요"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="err">#</span><span class="n">endregion</span>
        <span class="cm">/***********************************************************************
        *                               Methods
        ***********************************************************************/</span>
        <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
        <span class="c1">/// &lt;summary&gt; 키보드 입력을 통해 필드 초기화 &lt;/summary&gt;</span>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">SetValuesByKeyInput</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="m">0f</span><span class="p">,</span> <span class="n">v</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">moveForward</span><span class="p">))</span> <span class="n">v</span> <span class="p">+=</span> <span class="m">1.0f</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">moveBackward</span><span class="p">))</span> <span class="n">v</span> <span class="p">-=</span> <span class="m">1.0f</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">moveLeft</span><span class="p">))</span> <span class="n">h</span> <span class="p">-=</span> <span class="m">1.0f</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">moveRight</span><span class="p">))</span> <span class="n">h</span> <span class="p">+=</span> <span class="m">1.0f</span><span class="p">;</span>

            <span class="c1">// Move, Rotate</span>
            <span class="nf">SendMoveInfo</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
            <span class="n">_rotation</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetAxisRaw</span><span class="p">(</span><span class="s">"Mouse X"</span><span class="p">),</span> <span class="p">-</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetAxisRaw</span><span class="p">(</span><span class="s">"Mouse Y"</span><span class="p">));</span>

            <span class="n">State</span><span class="p">.</span><span class="n">isMoving</span> <span class="p">=</span> <span class="n">h</span> <span class="p">!=</span> <span class="m">0</span> <span class="p">||</span> <span class="n">v</span> <span class="p">!=</span> <span class="m">0</span><span class="p">;</span>
            <span class="n">State</span><span class="p">.</span><span class="n">isRunning</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">run</span><span class="p">);</span>

            <span class="c1">// Jump</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">jump</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="nf">Jump</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="c1">// Wheel</span>
            <span class="n">_tpCameraWheelInput</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxisRaw</span><span class="p">(</span><span class="s">"Mouse ScrollWheel"</span><span class="p">);</span>
            <span class="n">_currentWheel</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">_currentWheel</span><span class="p">,</span> <span class="n">_tpCameraWheelInput</span><span class="p">,</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomAccel</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">Rotate</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Transform</span> <span class="n">root</span><span class="p">,</span> <span class="n">rig</span><span class="p">;</span>

            <span class="c1">// 1인칭</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">root</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">walker</span><span class="p">;</span>
                <span class="n">rig</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="c1">// 3인칭</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">root</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRoot</span><span class="p">;</span>
                <span class="n">rig</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">;</span>
                <span class="nf">RotateWalker</span><span class="p">();</span> <span class="c1">// 3인칭일 경우 Walker를 이동방향으로 회전</span>
            <span class="p">}</span>
            
            <span class="k">if</span><span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCursorActive</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

            <span class="c1">// 회전 ==========================================================</span>
            <span class="kt">float</span> <span class="n">deltaCoef</span> <span class="p">=</span> <span class="n">_deltaTime</span> <span class="p">*</span> <span class="m">50f</span><span class="p">;</span>

            <span class="c1">// 상하 : Rig 회전</span>
            <span class="kt">float</span> <span class="n">xRotPrev</span> <span class="p">=</span> <span class="n">rig</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">xRotNext</span> <span class="p">=</span> <span class="n">xRotPrev</span> <span class="p">+</span> <span class="n">_rotation</span><span class="p">.</span><span class="n">y</span>
                <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">rotationSpeed</span> <span class="p">*</span> <span class="n">deltaCoef</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">xRotNext</span> <span class="p">&gt;</span> <span class="m">180f</span><span class="p">)</span>
                <span class="n">xRotNext</span> <span class="p">-=</span> <span class="m">360f</span><span class="p">;</span>

            <span class="c1">// 좌우 : Root 회전</span>
            <span class="kt">float</span> <span class="n">yRotPrev</span> <span class="p">=</span> <span class="n">root</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">yRotNext</span> <span class="p">=</span>
                <span class="n">yRotPrev</span> <span class="p">+</span> <span class="n">_rotation</span><span class="p">.</span><span class="n">x</span>
                <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">rotationSpeed</span> <span class="p">*</span> <span class="n">deltaCoef</span><span class="p">;</span>

            <span class="c1">// 상하 회전 가능 여부</span>
            <span class="kt">bool</span> <span class="n">xRotatable</span> <span class="p">=</span>
                <span class="n">CamOption</span><span class="p">.</span><span class="n">lookUpDegree</span> <span class="p">&lt;</span> <span class="n">xRotNext</span> <span class="p">&amp;&amp;</span>
                <span class="n">CamOption</span><span class="p">.</span><span class="n">lookDownDegree</span> <span class="p">&gt;</span> <span class="n">xRotNext</span><span class="p">;</span>

            <span class="c1">// Rig 상하 회전 적용</span>
            <span class="n">rig</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="p">(</span><span class="n">xRotatable</span> <span class="p">?</span> <span class="n">xRotNext</span> <span class="p">:</span> <span class="n">xRotPrev</span><span class="p">);</span>

            <span class="c1">// Root 좌우 회전 적용</span>
            <span class="n">root</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">yRotNext</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt; 3인칭일 경우 Walker 회전 &lt;/summary&gt;</span>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">RotateWalker</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isMoving</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

            <span class="n">Vector3</span> <span class="n">dir</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="nf">TransformDirection</span><span class="p">(</span><span class="n">_moveDir</span><span class="p">);</span>
            <span class="kt">float</span> <span class="n">currentY</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">walker</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">nextY</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="nf">LookRotation</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span><span class="p">).</span><span class="n">eulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">nextY</span> <span class="p">-</span> <span class="n">currentY</span> <span class="p">&gt;</span> <span class="m">180f</span><span class="p">)</span> <span class="n">nextY</span> <span class="p">-=</span> <span class="m">360f</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">currentY</span> <span class="p">-</span> <span class="n">nextY</span> <span class="p">&gt;</span> <span class="m">180f</span><span class="p">)</span> <span class="n">nextY</span> <span class="p">+=</span> <span class="m">360f</span><span class="p">;</span>

            <span class="n">Com</span><span class="p">.</span><span class="n">walker</span><span class="p">.</span><span class="n">eulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">currentY</span><span class="p">,</span> <span class="n">nextY</span><span class="p">,</span> <span class="m">0.1f</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">ShowCursorToggle</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">showCursor</span><span class="p">))</span>
                <span class="n">State</span><span class="p">.</span><span class="n">isCursorActive</span> <span class="p">=</span> <span class="p">!</span><span class="n">State</span><span class="p">.</span><span class="n">isCursorActive</span><span class="p">;</span>

            <span class="nf">ShowCursor</span><span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCursorActive</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">ShowCursor</span><span class="p">(</span><span class="kt">bool</span> <span class="k">value</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Cursor</span><span class="p">.</span><span class="n">visible</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
            <span class="n">Cursor</span><span class="p">.</span><span class="n">lockState</span> <span class="p">=</span> <span class="k">value</span> <span class="p">?</span> <span class="n">CursorLockMode</span><span class="p">.</span><span class="n">None</span> <span class="p">:</span> <span class="n">CursorLockMode</span><span class="p">.</span><span class="n">Locked</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">CameraViewToggle</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">switchCamera</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span> <span class="p">=</span> <span class="p">!</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">;</span>
                <span class="n">Com</span><span class="p">.</span><span class="n">fpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>
                <span class="n">Com</span><span class="p">.</span><span class="n">tpCamObject</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(!</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">);</span>

                <span class="c1">// TP -&gt; FP</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">Com</span><span class="p">.</span><span class="n">walker</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRoot</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
                    <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">// FP -&gt; TP</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">Com</span><span class="p">.</span><span class="n">tpRoot</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">Com</span><span class="p">.</span><span class="n">walker</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
                    <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">.</span><span class="n">localEulerAngles</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="n">Com</span><span class="p">.</span><span class="n">fpRig</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">TpCameraZoom</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>                <span class="c1">// TP 카메라만 가능</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Mathf</span><span class="p">.</span><span class="nf">Abs</span><span class="p">(</span><span class="n">_currentWheel</span><span class="p">)</span> <span class="p">&lt;</span> <span class="m">0.01f</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// 휠 입력 있어야 가능</span>

            <span class="n">Transform</span> <span class="n">tpCamTr</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpCamera</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span>
            <span class="n">Transform</span> <span class="n">tpCamRig</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRig</span><span class="p">;</span>

            <span class="kt">float</span> <span class="n">zoom</span> <span class="p">=</span> <span class="n">_deltaTime</span> <span class="p">*</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomSpeed</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">currentCamToRigDist</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">Distance</span><span class="p">(</span><span class="n">tpCamTr</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">tpCamRig</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
            <span class="n">Vector3</span> <span class="n">move</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">zoom</span> <span class="p">*</span> <span class="n">_currentWheel</span> <span class="p">*</span> <span class="m">10f</span><span class="p">;</span>

            <span class="c1">// Zoom In</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">_currentWheel</span> <span class="p">&gt;</span> <span class="m">0.01f</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">_tpCamZoomInitialDistance</span> <span class="p">-</span> <span class="n">currentCamToRigDist</span> <span class="p">&lt;</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomInDistance</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">tpCamTr</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(</span><span class="n">move</span><span class="p">,</span> <span class="n">Space</span><span class="p">.</span><span class="n">Self</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="c1">// Zoom Out</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">_currentWheel</span> <span class="p">&lt;</span> <span class="p">-</span><span class="m">0.01f</span><span class="p">)</span>
            <span class="p">{</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">currentCamToRigDist</span> <span class="p">-</span> <span class="n">_tpCamZoomInitialDistance</span> <span class="p">&lt;</span> <span class="n">CamOption</span><span class="p">.</span><span class="n">zoomOutDistance</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">tpCamTr</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(</span><span class="n">move</span><span class="p">,</span> <span class="n">Space</span><span class="p">.</span><span class="n">Self</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">UpdateAnimationParams</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="n">z</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">x</span> <span class="p">=</span> <span class="n">_moveDir</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
                <span class="n">z</span> <span class="p">=</span> <span class="n">_moveDir</span><span class="p">.</span><span class="n">z</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isRunning</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">x</span> <span class="p">*=</span> <span class="m">2f</span><span class="p">;</span>
                    <span class="n">z</span> <span class="p">*=</span> <span class="m">2f</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">x</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
                <span class="n">z</span> <span class="p">=</span> <span class="n">_moveDir</span><span class="p">.</span><span class="n">sqrMagnitude</span> <span class="p">&gt;</span> <span class="m">0f</span> <span class="p">?</span> <span class="m">1f</span> <span class="p">:</span> <span class="m">0f</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isRunning</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">z</span> <span class="p">*=</span> <span class="m">2f</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// 보간</span>
            <span class="k">const</span> <span class="kt">float</span> <span class="n">LerpSpeed</span> <span class="p">=</span> <span class="m">0.05f</span><span class="p">;</span>
            <span class="n">_moveX</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">_moveX</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">LerpSpeed</span><span class="p">);</span>
            <span class="n">_moveZ</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">_moveZ</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">LerpSpeed</span><span class="p">);</span>

            <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetFloat</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramMoveX</span><span class="p">,</span> <span class="n">_moveX</span><span class="p">);</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetFloat</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramMoveZ</span><span class="p">,</span> <span class="n">_moveZ</span><span class="p">);</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetFloat</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramDistY</span><span class="p">,</span> <span class="n">_distFromGround</span><span class="p">);</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetBool</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramGrounded</span><span class="p">,</span> <span class="n">State</span><span class="p">.</span><span class="n">isGrounded</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="err">#</span><span class="n">endregion</span>
        <span class="cm">/***********************************************************************
        *                               Movement Methods
        ***********************************************************************/</span>
        <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
        <span class="c1">/// &lt;summary&gt; 땅으로부터의 거리 체크 - 애니메이터 전달용 &lt;/summary&gt;</span>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">CheckGroundDistance</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">_distFromGround</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">movement3D</span><span class="p">.</span><span class="nf">GetDistanceFromGround</span><span class="p">();</span>
            <span class="n">State</span><span class="p">.</span><span class="n">isGrounded</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">movement3D</span><span class="p">.</span><span class="nf">IsGrounded</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">SendMoveInfo</span><span class="p">(</span><span class="kt">float</span> <span class="n">horizontal</span><span class="p">,</span> <span class="kt">float</span> <span class="n">vertical</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_moveDir</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">horizontal</span><span class="p">,</span> <span class="m">0f</span><span class="p">,</span> <span class="n">vertical</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">isCurrentFp</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">_worldMoveDir</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">walker</span><span class="p">.</span><span class="nf">TransformDirection</span><span class="p">(</span><span class="n">_moveDir</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">_worldMoveDir</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">tpRoot</span><span class="p">.</span><span class="nf">TransformDirection</span><span class="p">(</span><span class="n">_moveDir</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="n">Com</span><span class="p">.</span><span class="n">movement3D</span><span class="p">.</span><span class="nf">SetMovement</span><span class="p">(</span><span class="n">_worldMoveDir</span><span class="p">,</span> <span class="n">State</span><span class="p">.</span><span class="n">isRunning</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">Jump</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">bool</span> <span class="n">jumpSucceeded</span> <span class="p">=</span> <span class="n">Com</span><span class="p">.</span><span class="n">movement3D</span><span class="p">.</span><span class="nf">SetJump</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">jumpSucceeded</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">// 애니메이션 점프 트리거</span>
                <span class="n">Com</span><span class="p">.</span><span class="n">anim</span><span class="p">.</span><span class="nf">SetTrigger</span><span class="p">(</span><span class="n">AnimOption</span><span class="p">.</span><span class="n">paramJump</span><span class="p">);</span>

                <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"JUMP"</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="err">#</span><span class="n">endregion</span>
        <span class="cm">/***********************************************************************
        *                               Public Methods
        ***********************************************************************/</span>
        <span class="err">#</span><span class="n">region</span> <span class="p">.</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">KnockBack</span><span class="p">(</span><span class="k">in</span> <span class="n">Vector3</span> <span class="n">force</span><span class="p">,</span> <span class="kt">float</span> <span class="n">time</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Com</span><span class="p">.</span><span class="n">movement3D</span><span class="p">.</span><span class="nf">KnockBack</span><span class="p">(</span><span class="n">force</span><span class="p">,</span> <span class="n">time</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="err">#</span><span class="n">endregion</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div>  </div>

</details>


      </div>

      <div class="post-tail-wrapper text-muted">

        <!-- categories -->
        
        <div class="post-meta mb-3">
          <i class="far fa-folder-open fa-fw mr-1"></i>
          
            <a href='/categories/unity/'>Unity</a>,
            <a href='/categories/unity-study/'>Unity Study</a>
        </div>
        

        <!-- tags -->
        
        <div class="post-tags">
          <i class="fa fa-tags fa-fw mr-1"></i>
          
          <a href="/tags/unity/"
            class="post-tag no-text-decoration" >unity</a>
          
          <a href="/tags/csharp/"
            class="post-tag no-text-decoration" >csharp</a>
          
          <a href="/tags/fps/"
            class="post-tag no-text-decoration" >fps</a>
          
          <a href="/tags/tps/"
            class="post-tag no-text-decoration" >tps</a>
          
          <a href="/tags/controller/"
            class="post-tag no-text-decoration" >controller</a>
          
          </div>
        

        <div class="post-tail-bottom
          d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
          
          <div class="license-wrapper">
            This post is licensed under
            <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
            by the author.
          </div>
          

          <!--
 Post sharing snippet

 v2.1
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Share</span>
  <span class="share-icons">
    
    

    
      
        <a href="https://twitter.com/intent/tweet?text=유니티 - 1인칭, 3인칭 전환 가능한 캐릭터 제작하기 - Rito15&url=https://rito15.github.io/posts/unity-fps-tps-character/" data-toggle="tooltip" data-placement="top"
          title="Twitter" target="_blank" rel="noopener" aria-label="Twitter">
          <i class="fa-fw fab fa-twitter"></i>
        </a>
    
      
        <a href="https://www.facebook.com/sharer/sharer.php?title=유니티 - 1인칭, 3인칭 전환 가능한 캐릭터 제작하기 - Rito15&u=https://rito15.github.io/posts/unity-fps-tps-character/" data-toggle="tooltip" data-placement="top"
          title="Facebook" target="_blank" rel="noopener" aria-label="Facebook">
          <i class="fa-fw fab fa-facebook-square"></i>
        </a>
    
      
        <a href="https://telegram.me/share?text=유니티 - 1인칭, 3인칭 전환 가능한 캐릭터 제작하기 - Rito15&url=https://rito15.github.io/posts/unity-fps-tps-character/" data-toggle="tooltip" data-placement="top"
          title="Telegram" target="_blank" rel="noopener" aria-label="Telegram">
          <i class="fa-fw fab fa-telegram"></i>
        </a>
    

    <i class="fa-fw fas fa-link small" onclick="copyLink()"
        data-toggle="tooltip" data-placement="top" title="Copy link"></i>

  </span>
</div>


        </div><!-- .post-tail-bottom -->

      </div><!-- div.post-tail -->

    </div> <!-- .post -->


  </div> <!-- #post-wrapper -->

  

  

  <!--
  The Pannel on right side (Desktop views)
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">

  <div class="access">

  














  

    <div id="access-lastmod" class="post">
      <span>Recent Update</span>
      <ul class="post-content pl-0 pb-1 ml-1 mt-2">

      
        
        
        
        <li><a href="/posts/unity-rigidbody-move-and-jump/">유니티 - 키보드 입력 및 리지드바디 이동, 점프 기본 코드</a></li>
      
        
        
        
        <li><a href="/posts/unity-fixed-update-and-physics-loop/">유니티 - FixedUpdate()와 Physics Loop에 대한 이해</a></li>
      
        
        
        
        <li><a href="/posts/cs-global-key-hook/">C# - Global Key Hook</a></li>
      
        
        
        
        <li><a href="/posts/cs-global-mouse-hook/">C# - Global Mouse Hook</a></li>
      
        
        
        
        <li><a href="/posts/unity-opt-script-optimization/">유니티 - 스크립트 최적화</a></li>
      

      </ul>
    </div> <!-- #access-lastmod -->

  

  















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  
    <div id="access-tags">
      <span>Trending Tags</span>
      <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

      
        
        <a class="post-tag" href="/tags/csharp/">csharp</a>
      
        
        <a class="post-tag" href="/tags/unity/">unity</a>
      
        
        <a class="post-tag" href="/tags/editor/">editor</a>
      
        
        <a class="post-tag" href="/tags/shader/">shader</a>
      
        
        <a class="post-tag" href="/tags/memo/">memo</a>
      
        
        <a class="post-tag" href="/tags/graphics/">graphics</a>
      
        
        <a class="post-tag" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag" href="/tags/thread/">thread</a>
      
        
        <a class="post-tag" href="/tags/amplify/">amplify</a>
      
        
        <a class="post-tag" href="/tags/plugin/">plugin</a>
      

      </div>
    </div>
  
  </div> <!-- .access -->

  
    <div id="toc-wrapper" class="pl-0 pr-4 mb-5">
      <span class="pl-3 pt-2 mb-2">Contents</span>
      <nav id="toc" data-toggle="toc"></nav>
    </div>
  

</div> <!-- #panel-wrapper -->


</div> <!-- .row -->

<div class="row">
  <div class="col-12 col-lg-11 col-xl-8">
    <div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

    <!--
 Recommend the other 3 posts according to the tags and categories of the current post,
 if the number is not enough, use the other latest posts to supplement.

 v2.0
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<!-- The total size of related posts  -->


<!-- An random integer that bigger than 0  -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy}  -->








  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  
    
  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  








<!-- Fill with the other newlest posts  -->






  <div id="related-posts" class="mt-5 mb-2 mb-sm-4">
    <h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3>
    <div class="card-deck mb-4">
    
      
      
      <div class="card">
        <a href="/posts/unity-serialize-tree-object/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Sep  6
  

  <i class="unloaded">2021-09-06T23:23:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>유니티 - 트리 구조 데이터 직렬화하기</h3>
            <div class="text-muted small">
              <p>
                





                트리(Tree) 자료구조


1
2
3
4
class TreeNode
{
    public TreeNode[] children;
}


위와 같이 자기 타입의 배열 또는 컬렉션을 필드로 갖는 구조를 트리 자료구조라고 한다.

자식 및 하위 노드들을 순회하기 위해 재귀적 호출을 많이 사용한다.





직렬화(Serialization)


데이터를 저...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/behavior-tree/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Jan  5
  

  <i class="unloaded">2021-01-05T00:26:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>유니티 - 비헤이비어 트리(Behavior Tree)</h3>
            <div class="text-muted small">
              <p>
                





                개념



  FSM (Finite State Machine)의 단점을 보완하기 위해 만들어진 기법
  FSM에서는 상태 전이 조건을 모두 각각의 상태에서 검사하지만, BT에서는 상태 동작 뿐만 아니라 전이 조건도 노드로 관리한다.
  노드 그래프를 통해 시각화하거나 params, 빌더 패턴 등을 활용하여 스크립트 내에서도 가독성 좋게 구성할 수 있다...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/ray-marching/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Jan 19
  

  <i class="unloaded">2021-01-19T23:15:00+09:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>레이 마칭(Ray Marching)</h3>
            <div class="text-muted small">
              <p>
                





                레이 마칭이란?



  
    메시 데이터를 이용하는 기존의 3D 렌더링 방식과는 달리, 거리 함수(SDF)를 통해 오브젝트의 표면을 정의한다.
  
  
    카메라로부터 스크린 픽셀들을 향해 레이를 전진시키고(Ray Marching), 해당 픽셀의 레이가 오브젝트 표면에 닿으면 그 픽셀에 오브젝트 표면을 렌더링하는 방식을 사용한다.
  


...
              </p>
            </div>
          </div>
        </a>
      </div>
    
    </div> <!-- .card-deck -->
  </div> <!-- #related-posts -->



    <!--
  Navigation buttons at the bottom of the post.

  v2.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->

<div class="post-navigation d-flex justify-content-between">
  
  <a href="/posts/unity-memo-cooldown-icon-ui/" class="btn btn-outline-primary">
    <p>유니티 - 쿨타임 아이콘 UI 만들기</p>
  </a>
  

  
  <a href="/posts/opengl-study-17/" class="btn btn-outline-primary">
    <p>OpenGL 공부 - 17 - Ambient, Diffuse Lighting</p>
  </a>
  

</div>

    

    </div> <!-- #post-extend-wrapper -->

  </div> <!-- .col-* -->

</div> <!-- .row -->



<script>
/* 코드 블록 우측 상단 Copy 버튼 */
const codes = document.querySelectorAll('.code-button-header + .highlighter-rouge .rouge-code');
const copyCodeButtons = document.querySelectorAll('.copy-code-button');

copyCodeButtons.forEach((copyCodeButton, index) => {
  copyCodeButton.addEventListener('click', () => {
    window.navigator.clipboard.writeText(codes[index].innerText.slice(0, -1));
    copyCodeButton.classList.add('copied');

    setTimeout(() => {
      copyCodeButton.classList.remove('copied');
    }, 2000);
  });
});
</script>


  <!-- image lazy load: https://github.com/ApoorvSaxena/lozad.js -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>

<script type="text/javascript">
  const imgs = document.querySelectorAll('.post-content img');
  const observer = lozad(imgs);
  observer.observe();
</script>




        <!--
  The Footer
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<footer class="d-flex w-100 justify-content-center">
  <div class="d-flex justify-content-between align-items-center">
    <div class="footer-left">
      <p class="mb-0">
        © 2021
        <a href="https://github.com/rito15">Rito15</a>.
        
        <span data-toggle="tooltip" data-placement="top"
          title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span>
        
      </p>
    </div>

    <div class="footer-right">
      <p class="mb-0">
        Powered by
        <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
        with
        <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a>
        theme.
      </p>
    </div>

  </div> <!-- div.d-flex -->
</footer>


      </div>

      <!--
  The Search results
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-12 col-xl-11 post-content">
    <div id="search-hints">
      <h4 class="text-muted mb-4">Trending Tags</h4>

      















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



      
        
        <a class="post-tag" href="/tags/csharp/">csharp</a>
      
        
        <a class="post-tag" href="/tags/unity/">unity</a>
      
        
        <a class="post-tag" href="/tags/editor/">editor</a>
      
        
        <a class="post-tag" href="/tags/shader/">shader</a>
      
        
        <a class="post-tag" href="/tags/memo/">memo</a>
      
        
        <a class="post-tag" href="/tags/graphics/">graphics</a>
      
        
        <a class="post-tag" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag" href="/tags/thread/">thread</a>
      
        
        <a class="post-tag" href="/tags/amplify/">amplify</a>
      
        
        <a class="post-tag" href="/tags/plugin/">plugin</a>
      

    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>


    </div> <!-- #main-wrapper -->

    
      <!--
  mermaid-js loader
-->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(function() {
    let initTheme = "default";

    if ($("html[mode=dark]").length > 0
      || ($("html[mode]").length == 0
        && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) {
      initTheme = "dark";
    }

    let mermaidConf = {
      theme: initTheme  /* <default|dark|forest|neutral> */
    };

    /* Markdown converts to HTML */
    $("pre").has("code.language-mermaid").each(function() {
      let svgCode = $(this).children().html();
      $(this).addClass("unloaded");
      $(this).after(`<div class=\"mermaid\">${svgCode}</div>`);
    });

    mermaid.initialize(mermaidConf);
  });
</script>

    

    <div id="mask"></div>

    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>

    <!--
  Jekyll Simple Search loader
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->





<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script>

<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="https://rito15.github.io{url}">{title}</a>  <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    <div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div>    <div><i class="fa fa-tag fa-fw"></i>{tags}</div>  </div>  <p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">Oops! No result founds.</p>'
});
</script>


    <!-- 2021-06-29 추가 : 애널리틱스 적용 -->
    <!--
  The GA snippet
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-200391565-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-200391565-1');
</script>


  </body>

</html>

